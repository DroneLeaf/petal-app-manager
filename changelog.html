

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog &mdash; Petal App Manager 0.2.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=ba7fdd6d" />

  
    <link rel="shortcut icon" href="_static/cropped-site-icon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=000c92bf"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api_reference/index.html" />
    <link rel="prev" title="Petal Flight Log" href="petal_documentation/petal_flight_log.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Petal App Manager
              <img src="_static/White logo-vertical.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-is-petal-app-manager">What is Petal App Manager?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#key-features">Key Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#architecture">Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#system-architecture-diagram">System Architecture Diagram</a></li>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#architecture-components">Architecture Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#data-flow">Data Flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#use-cases">Use Cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#why-petal-app-manager">Why Petal App Manager?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started/dependencies.html">Dependencies Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started/dependencies.html#system-requirements">System Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/dependencies.html#python-3-11-installation">Python 3.11 Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/dependencies.html#pdm-installation">PDM Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/dependencies.html#redis-installation-and-configuration">Redis Installation and Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/dependencies.html#redis-development-tools">Redis Development Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/dependencies.html#controller-dashboard">Controller Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/quickstart.html">Quick Start Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#development-installation">Development Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting_started/quickstart.html#using-hear-cli-recommended">Using HEAR-CLI (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting_started/quickstart.html#manual-development-setup">Manual Development Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#production-installation">Production Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting_started/quickstart.html#id1">Using HEAR-CLI (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting_started/quickstart.html#custom-version-installation-field-testing">Custom Version Installation (Field Testing)</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting_started/quickstart.html#manual-production-installation">Manual Production Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#environment-configuration">Environment Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#running-the-application">Running the Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#verifying-the-installation">Verifying the Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#quick-development-workflow">Quick Development Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/quickstart.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="how_to_use/index.html">How to Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how_to_use/making_requests.html">Making Requests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/making_requests.html#using-the-postman-collection">Using the Postman Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/making_requests.html#using-the-docs-interface">Using the /docs Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/making_requests.html#accessing-swagger-ui">Accessing Swagger UI</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/making_requests.html#interactive-api-testing">Interactive API Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/making_requests.html#using-redoc">Using ReDoc</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/making_requests.html#example-api-calls">Example API Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/making_requests.html#quick-testing-workflow">Quick Testing Workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how_to_use/service_management.html">The Petal App Manager Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#admin-dashboard-interface">Admin Dashboard Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#accessing-the-admin-dashboard">Accessing the Admin Dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#dashboard-features">Dashboard Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#using-the-admin-dashboard">Using the Admin Dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#alternative-access-methods">Alternative Access Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#managing-petals-and-proxies-via-api">Managing Petals and Proxies via API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#checking-what-s-running">Checking What’s Running</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#viewing-all-available-components">Viewing All Available Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#petal-control-via-api">Petal Control via API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#enabling-petals">Enabling Petals</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#disabling-petals">Disabling Petals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#proxy-control-via-api">Proxy Control via API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#enabling-proxies">Enabling Proxies</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/service_management.html#disabling-proxies">Disabling Proxies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#common-use-cases">Common Use Cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#restart-management">Restart Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/service_management.html#service-files-and-locations">Service Files and Locations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how_to_use/configuration.html">Configuration Changes in .env</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#environment-variables-overview">Environment Variables Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#general-configuration">General Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-log-level">PETAL_LOG_LEVEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-log-to-file">PETAL_LOG_TO_FILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-log-dir">PETAL_LOG_DIR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#mavlink-configuration">MAVLink Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-mavlink-endpoint">PETAL_MAVLINK_ENDPOINT</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-mavlink-baud">PETAL_MAVLINK_BAUD</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#other-mavlink-settings">Other MAVLink Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#cloud-configuration">Cloud Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#redis-configuration">Redis Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-redis-host-and-petal-redis-port">PETAL_REDIS_HOST and PETAL_REDIS_PORT</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-redis-unix-socket-path">PETAL_REDIS_UNIX_SOCKET_PATH</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_use/configuration.html#petal-redis-health-message-rate">PETAL_REDIS_HEALTH_MESSAGE_RATE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#database-configuration">Database Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#data-operations-urls">Data Operations URLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#mqtt-configuration">MQTT Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#proxy-connection-retry-configuration">Proxy Connection Retry Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#petal-specific-configuration">Petal-Specific Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#applying-configuration-changes">Applying Configuration Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_use/configuration.html#configuration-examples">Configuration Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development_contribution/index.html">Development and Contribution Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development_contribution/adding_petals.html">Adding a New Petal Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#what-is-a-petal">What is a Petal?</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#creating-a-new-petal">Creating a New Petal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#using-hear-cli-recommended">Using HEAR-CLI (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#manual-setup">Manual Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#petal-structure">Petal Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#key-components">Key Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#mqtt-command-handlers-mqtt-action">MQTT Command Handlers (<code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#handler-signature">Handler Signature</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#the-cpu-heavy-parameter">The <code class="docutils literal notranslate"><span class="pre">cpu_heavy</span></code> Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#how-it-works-under-the-hood">How It Works Under the Hood</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#dynamic-factory-handlers">Dynamic / Factory Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#migration-from-legacy-pattern">Migration from Legacy Pattern</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#registering-the-petal">Registering the Petal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#adding-to-proxies-yaml">Adding to proxies.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#adding-to-pyproject-toml-for-production">Adding to pyproject.toml (for Production)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#installing-your-petal">Installing Your Petal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#development-installation-editable">Development Installation (Editable)</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#production-installation-git-tag">Production Installation (Git Tag)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#testing-your-petal">Testing Your Petal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#integration-testing">Integration Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#naming-conventions">Naming Conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#proxy-management">Proxy Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#error-handling">Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#versioning">Versioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#common-pitfalls">Common Pitfalls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#petal-name-must-start-with-petal">Petal Name Must Start with <code class="docutils literal notranslate"><span class="pre">petal-*</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#petal-not-loading">Petal Not Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/adding_petals.html#entry-point-errors">Entry Point Errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/adding_petals.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_contribution/inter-petal_communications.html">Inter-Petal Communication Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#benefits">Benefits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#implementation-guide">Implementation Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#for-sink-petal-developers-message-receivers">For Sink Petal Developers (Message Receivers)</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#for-source-petal-developers-message-senders">For Source Petal Developers (Message Senders)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#data-model-design">Data Model Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#channel-naming-convention">Channel Naming Convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#error-handling">Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#versioning">Versioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#example-complete-implementation">Example: Complete Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#sink-petal-petal-leafsdk">Sink Petal (petal-leafsdk)</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#source-petal-petal-qgc-mission-adapter">Source Petal (petal-qgc-mission-adapter)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#acceptance-criteria">Acceptance Criteria</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#reference-implementation">Reference Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#migration-path">Migration Path</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#for-existing-petals">For Existing Petals</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#deprecation-strategy">Deprecation Strategy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#additional-resources">Additional Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/inter-petal_communications.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#common-issues">Common Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/inter-petal_communications.html#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_contribution/contribution_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/contribution_guidelines.html#dependency-architecture">Dependency Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/contribution_guidelines.html#understanding-the-petal-stack-dependencies">Understanding the Petal Stack Dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/contribution_guidelines.html#version-management-by-repository">Version Management by Repository</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/contribution_guidelines.html#petal-app-manager">Petal App Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/contribution_guidelines.html#individual-petals">Individual Petals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/contribution_guidelines.html#non-petal-packages">Non-Petal Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/contribution_guidelines.html#leafsdk">LeafSDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/contribution_guidelines.html#mavlink-pymavlink-very-special-case">mavlink/pymavlink (Very Special Case)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/contribution_guidelines.html#version-summary-table">Version Summary Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/contribution_guidelines.html#getting-help">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_contribution/using_proxies.html">Using Proxies in Petals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#available-proxy-types">Available Proxy Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#accessing-proxies-in-your-petal">Accessing Proxies in Your Petal</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#redisproxy">RedisProxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#mavlinkexternalproxy">MavlinkExternalProxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#clouddbproxy">CloudDBProxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#localdbproxy">LocalDBProxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#s3bucketproxy">S3BucketProxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#mqttproxy">MQTTProxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#error-handling-and-best-practices">Error Handling and Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/using_proxies.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_contribution/advanced_debugging.html">Advanced Debugging and Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#available-logging-tools">Available Logging Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#per-level-logging-configuration">Per-Level Logging Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#configuration-methods">Configuration Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#output-options">Output Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#common-configuration-scenarios">Common Configuration Scenarios</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#legacy-format-support">Legacy Format Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#csv-signal-logging-tool">CSV Signal Logging Tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#advanced-configuration">Advanced Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#complete-petal-example">Complete Petal Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#debugging-best-practices">Debugging Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#environment-specific-configuration">Environment-Specific Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#performance-considerations">Performance Considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/advanced_debugging.html#error-handling-and-recovery">Error Handling and Recovery</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#integration-with-admin-dashboard">Integration with Admin Dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#testing-and-validation">Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#file-management">File Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/advanced_debugging.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_contribution/profiling.html">Petal App Manager Profiling Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#quick-start">Quick Start</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#prerequisites">1. Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#install-dependencies">2. Install Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#start-pam">3. Start PAM</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#run-profiling-and-or-monitoring">4. Run Profiling and/or Monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#view-results">5. View Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#command-line-flags">6. Command-Line Flags</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#profiling-scenarios">Profiling Scenarios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#workflow-for-profiling-different-scenarios">Workflow for Profiling Different Scenarios</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#example-sitl-mission-for-profiling">Example SITL Mission for Profiling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#output-formats-visualizations">Output Formats &amp; Visualizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#speedscope-json-interactive">Speedscope JSON (Interactive) ⭐</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#monitor-output-cpu-and-memory-usage">Monitor Output: CPU and Memory Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#interpretation-guide">Interpretation Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#what-to-look-for">What to Look For</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#reading-flame-graphs">Reading Flame Graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#common-patterns-to-identify">Common Patterns to Identify</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#environment-issues">Environment Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#profiler-issues">Profiler Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#visualization-issues">Visualization Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#performance-issues">Performance Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#results-interpretation-issues">Results Interpretation Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#quick-reference">Quick Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#command-cheatsheet">Command Cheatsheet</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#file-naming-conventions">File Naming Conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="development_contribution/profiling.html#keyboard-shortcuts-speedscope">Keyboard Shortcuts (Speedscope)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#getting-help">Getting Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_contribution/profiling.html#summary">Summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="petal_documentation/index.html">Petal Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html">Petal User Journey Coordinator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#required-proxies">Required Proxies</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#command-categories">Command Categories</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#esc-calibration-commands">ESC Calibration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#esc-calibration">esc_calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#esc-force-run-all">esc_force_run_all</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#esc-force-run-single">esc_force_run_single</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#esc-calibration-single">esc_calibration_single</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#parameter-configuration-commands">Parameter Configuration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#geometry">geometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#gps-module">gps_module</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#dist-module">dist_module</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#oflow-module">oflow_module</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#gps-spatial-offset">gps_spatial_offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#distance-spatial-offset">distance_spatial_offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#optical-flow-spatial-offset">optical_flow_spatial_offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#esc-update-calibration-limits">esc_update_calibration_limits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#bulk-parameter-operations">Bulk Parameter Operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#bulk-set-parameters">bulk_set_parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#bulk-get-parameters">bulk_get_parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#real-time-telemetry-streams">Real-Time Telemetry Streams</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#subscribe-rc-value-stream">subscribe_rc_value_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#unsubscribe-rc-value-stream">unsubscribe_rc_value_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#subscribe-pose-value-stream">subscribe_pose_value_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#unsubscribe-pose-value-stream">unsubscribe_pose_value_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#subscribe-ks-status-stream">subscribe_ks_status_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#unsubscribe-ks-status-stream">unsubscribe_ks_status_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#subscribe-mfs-a-status-stream-subscribe-mfs-b-status-stream">subscribe_mfs_a_status_stream / subscribe_mfs_b_status_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#unsubscribeall">unsubscribeall</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#trajectory-verification-commands">Trajectory Verification Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#verify-pos-yaw-directions">verify_pos_yaw_directions</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#verify-pos-yaw-directions-complete">verify_pos_yaw_directions_complete</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#wifi-optitrack-commands">WiFi &amp; OptiTrack Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#connect-to-wifi-and-verify-optitrack">connect_to_wifi_and_verify_optitrack</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#set-static-ip-address">set_static_ip_address</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#system-commands">System Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#reboot-px4">reboot_px4</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#format-sd-card">format_sd_card</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#get-log-entries">get_log_entries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#complete-usage-example">Complete Usage Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#error-handling">Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#mqtt-topics-reference">MQTT Topics Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#commands-received-on-command-edge">Commands (Received on <code class="docutils literal notranslate"><span class="pre">command/edge</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#published-topics-sent-to-command-web">Published Topics (Sent to <code class="docutils literal notranslate"><span class="pre">command/web</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_user_journey_coordinator.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="petal_documentation/petal_flight_log.html">Petal Flight Log</a><ul>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#required-proxies">Required Proxies</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#command-categories">Command Categories</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#flight-record-fetch-commands">Flight Record Fetch Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#fetch-flight-records">fetch_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#subscribe-fetch-flight-records">subscribe_fetch_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#unsubscribe-fetch-flight-records">unsubscribe_fetch_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#cancel-fetch-flight-records">cancel_fetch_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#fetch-existing-flight-records">fetch_existing_flight_records</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#flight-record-sync-commands">Flight Record Sync Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#start-sync-flight-record">start_sync_flight_record</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#subscribe-sync-job-value-stream">subscribe_sync_job_value_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#unsubscribe-sync-job-value-stream">unsubscribe_sync_job_value_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#cancel-sync-job">cancel_sync_job</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#flight-record-management-commands">Flight Record Management Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#delete-flight-record">delete_flight_record</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#bulk-delete-flight-records-commands">Bulk Delete Flight Records Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#bulk-delete-flight-records">bulk_delete_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#subscribe-bulk-delete-flight-records">subscribe_bulk_delete_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#unsubscribe-bulk-delete-flight-records">unsubscribe_bulk_delete_flight_records</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#cancel-bulk-delete-flight-records">cancel_bulk_delete_flight_records</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#clear-error-logs-commands">Clear Error Logs Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#detect-error-logs">detect_error_logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#clear-error-logs">clear_error_logs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#clear-all-ulogs-commands">Clear All ULogs Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#clear-all-ulogs">clear_all_ulogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#subscribe-clear-all-ulogs">subscribe_clear_all_ulogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#unsubscribe-clear-all-ulogs">unsubscribe_clear_all_ulogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#cancel-clear-all-ulogs">cancel_clear_all_ulogs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#job-status-values">Job Status Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#mqtt-topics-reference">MQTT Topics Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#data-models">Data Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#flightrecordmatch">FlightRecordMatch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#error-handling">Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#id1">MQTT Topics Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#commands-received-on-command-edge">Commands (Received on <code class="docutils literal notranslate"><span class="pre">command/edge</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="petal_documentation/petal_flight_log.html#published-topics-sent-to-command-web">Published Topics (Sent to <code class="docutils literal notranslate"><span class="pre">command/web</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="petal_documentation/petal_flight_log.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#version-0-2-2-2026-02-22">Version 0.2.2 (2026-02-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-2-1-2026-02-12">Version 0.2.1 (2026-02-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-2-0-2026-02-12">Version 0.2.0 (2026-02-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-62-2026-02-06">Version 0.1.62 (2026-02-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-61-2026-02-03">Version 0.1.61 (2026-02-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-60-2026-01-30">Version 0.1.60 (2026-01-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-59-2026-01-27">Version 0.1.59 (2026-01-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-57-2026-01-18">Version 0.1.57 (2026-01-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-56-2026-01-17">Version 0.1.56 (2026-01-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-54-2026-01-15">Version 0.1.54 (2026-01-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-53-2026-01-15">Version 0.1.53 (2026-01-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-52-2026-01-14">Version 0.1.52 (2026-01-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-51-2026-01-08">Version 0.1.51 (2026-01-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-50-2026-01-05">Version 0.1.50 (2026-01-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-49-2025-01-05">Version 0.1.49 (2025-01-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-48-2025-12-31">Version 0.1.48 (2025-12-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-47-2025-12-31">Version 0.1.47 (2025-12-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-46-2025-12-31">Version 0.1.46 (2025-12-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-45-2025-11-23">Version 0.1.45 (2025-11-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-44-2025-11-07">Version 0.1.44 (2025-11-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-43-2025-11-05-hotfix">Version 0.1.43 (2025-11-05) - Hotfix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-42-2025-11-03">Version 0.1.42 (2025-11-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-41-2025-11-02">Version 0.1.41 (2025-11-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-39-2025-10-23">Version 0.1.39 (2025-10-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-38-2025-10-23">Version 0.1.38 (2025-10-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-37-2025-10-22">Version 0.1.37 (2025-10-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-31-2025-09-25">Version 0.1.31 (2025-09-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-29-2025-08-28">Version 0.1.29 (2025-08-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-28-2025-08-17">Version 0.1.28 (2025-08-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-23-2025-07-31">Version 0.1.23 (2025-07-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-18-2025-07-29">Version 0.1.18 (2025-07-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-5-2025-07-03-first-stable-release">Version 0.1.5 (2025-07-03) - First Stable Release</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-0-1-0-2025-06-22-initial-release">Version 0.1.0 (2025-06-22) - Initial Release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_reference/core_api.html">Core API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.admin_ui">Admin UI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.admin_ui.admin_dashboard"><code class="docutils literal notranslate"><span class="pre">admin_dashboard()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.admin_ui.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.health">Health Endpoints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.health.detailed_health_check"><code class="docutils literal notranslate"><span class="pre">detailed_health_check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.health.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.health.health_check"><code class="docutils literal notranslate"><span class="pre">health_check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.health.organization_health_check"><code class="docutils literal notranslate"><span class="pre">organization_health_check()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.config_api">Configuration API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.AllComponentsResponse"><code class="docutils literal notranslate"><span class="pre">AllComponentsResponse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.ConfigResponse"><code class="docutils literal notranslate"><span class="pre">ConfigResponse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.PetalControlRequest"><code class="docutils literal notranslate"><span class="pre">PetalControlRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.PetalInfo"><code class="docutils literal notranslate"><span class="pre">PetalInfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.ProxyInfo"><code class="docutils literal notranslate"><span class="pre">ProxyInfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.control_petals"><code class="docutils literal notranslate"><span class="pre">control_petals()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.control_proxies"><code class="docutils literal notranslate"><span class="pre">control_proxies()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.get_status"><code class="docutils literal notranslate"><span class="pre">get_status()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.config_api.list_all_components"><code class="docutils literal notranslate"><span class="pre">list_all_components()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.cloud_api">Cloud API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.GetItemRequest"><code class="docutils literal notranslate"><span class="pre">GetItemRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.ScanTableRequest"><code class="docutils literal notranslate"><span class="pre">ScanTableRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.SetItemRequest"><code class="docutils literal notranslate"><span class="pre">SetItemRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.UpdateItemRequest"><code class="docutils literal notranslate"><span class="pre">UpdateItemRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.delete_item"><code class="docutils literal notranslate"><span class="pre">delete_item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.get_item"><code class="docutils literal notranslate"><span class="pre">get_item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.scan_table"><code class="docutils literal notranslate"><span class="pre">scan_table()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.set_item"><code class="docutils literal notranslate"><span class="pre">set_item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.cloud_api.update_item"><code class="docutils literal notranslate"><span class="pre">update_item()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.bucket_api">Bucket API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.bucket_api.delete_file_test"><code class="docutils literal notranslate"><span class="pre">delete_file_test()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.bucket_api.download_file_test"><code class="docutils literal notranslate"><span class="pre">download_file_test()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.bucket_api.get_info"><code class="docutils literal notranslate"><span class="pre">get_info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.bucket_api.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.bucket_api.list_files_test"><code class="docutils literal notranslate"><span class="pre">list_files_test()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.bucket_api.upload_file_test"><code class="docutils literal notranslate"><span class="pre">upload_file_test()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.mavftp_api">MAVLink FTP API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mavftp_api.ClearFailLogsRequest"><code class="docutils literal notranslate"><span class="pre">ClearFailLogsRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mavftp_api.clear_fail_logs"><code class="docutils literal notranslate"><span class="pre">clear_fail_logs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mavftp_api.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mavftp_api.list_directory"><code class="docutils literal notranslate"><span class="pre">list_directory()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.mqtt_api">MQTT API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.MQTTResponse"><code class="docutils literal notranslate"><span class="pre">MQTTResponse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.PublishMessageRequest"><code class="docutils literal notranslate"><span class="pre">PublishMessageRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.SubscribePatternRequest"><code class="docutils literal notranslate"><span class="pre">SubscribePatternRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.SubscribeTopicRequest"><code class="docutils literal notranslate"><span class="pre">SubscribeTopicRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.UnsubscribeTopicRequest"><code class="docutils literal notranslate"><span class="pre">UnsubscribeTopicRequest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.get_mqtt_status"><code class="docutils literal notranslate"><span class="pre">get_mqtt_status()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.list_subscriptions"><code class="docutils literal notranslate"><span class="pre">list_subscriptions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.publish_message"><code class="docutils literal notranslate"><span class="pre">publish_message()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.subscribe_topic"><code class="docutils literal notranslate"><span class="pre">subscribe_topic()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.mqtt_api.unsubscribe_topic"><code class="docutils literal notranslate"><span class="pre">unsubscribe_topic()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/core_api.html#module-petal_app_manager.api.proxy_info">Proxy Info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.proxy_info.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/core_api.html#petal_app_manager.api.proxy_info.list_proxies"><code class="docutils literal notranslate"><span class="pre">list_proxies()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference/proxies.html">Proxies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.base">Base Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.base.BaseProxy"><code class="docutils literal notranslate"><span class="pre">BaseProxy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.redis">Redis Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#redisproxy">RedisProxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.redis.RedisProxy"><code class="docutils literal notranslate"><span class="pre">RedisProxy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.external">External MAVLink Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petalappmanager-proxies-external">petalappmanager.proxies.external</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.DownloadCancelledException"><code class="docutils literal notranslate"><span class="pre">DownloadCancelledException</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.ExternalProxy"><code class="docutils literal notranslate"><span class="pre">ExternalProxy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.FTPDeleteError"><code class="docutils literal notranslate"><span class="pre">FTPDeleteError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.MavLinkExternalProxy"><code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.MavLinkFTPProxy"><code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.ULogInfo"><code class="docutils literal notranslate"><span class="pre">ULogInfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.external.setup_file_only_logger"><code class="docutils literal notranslate"><span class="pre">setup_file_only_logger()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.localdb">Local Database Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#localdbproxy">LocalDBProxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.localdb.LocalDBProxy"><code class="docutils literal notranslate"><span class="pre">LocalDBProxy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.cloud">Cloud Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#clouddbproxy">CloudDBProxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.cloud.CloudDBProxy"><code class="docutils literal notranslate"><span class="pre">CloudDBProxy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.bucket">Bucket Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.bucket.S3BucketProxy"><code class="docutils literal notranslate"><span class="pre">S3BucketProxy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/proxies.html#module-petal_app_manager.proxies.mqtt">MQTT Proxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#mqttproxy">MQTTProxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.mqtt.MQTTProxy"><code class="docutils literal notranslate"><span class="pre">MQTTProxy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/proxies.html#petal_app_manager.proxies.mqtt.MessageCallback"><code class="docutils literal notranslate"><span class="pre">MessageCallback</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference/plugins.html">Plugins System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference/plugins.html#module-petal_app_manager.plugins.base">Base Petal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.base.Petal"><code class="docutils literal notranslate"><span class="pre">Petal</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/plugins.html#module-petal_app_manager.plugins.decorators">Decorators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.decorators.http_action"><code class="docutils literal notranslate"><span class="pre">http_action()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.decorators.mqtt_action"><code class="docutils literal notranslate"><span class="pre">mqtt_action()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.decorators.websocket_action"><code class="docutils literal notranslate"><span class="pre">websocket_action()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/plugins.html#module-petal_app_manager.plugins.loader">Loader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.loader.initialize_petals"><code class="docutils literal notranslate"><span class="pre">initialize_petals()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.loader.load_petals"><code class="docutils literal notranslate"><span class="pre">load_petals()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/plugins.html#petal_app_manager.plugins.loader.startup_petals"><code class="docutils literal notranslate"><span class="pre">startup_petals()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference/petals.html">Available Petals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference/petals.html#production-petals">Production Petals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/petals.html#petal-flight-log">petal-flight-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/petals.html#petal-warehouse">petal-warehouse</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/petals.html#petal-leafsdk">petal-leafsdk</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_reference/petals.html#petal-user-journey-coordinator">petal-user-journey-coordinator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_reference/petals.html#development-petals">Development Petals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_reference/petals.html#petal-qgc-mission-server">petal-qgc-mission-server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference/index.html#core-modules">Core Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="known_issues.html">Known Issues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#petal-issues">Petal Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#petal-name-must-start-with-petal">Petal Name Must Start with <code class="docutils literal notranslate"><span class="pre">petal-*</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#petal-not-getting-loaded">Petal Not Getting Loaded</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#python-3-11-issues">Python 3.11 Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#python-3-11-not-found">Python 3.11 Not Found</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#pdm-issues">PDM Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#pdm-installation-fails">PDM Installation Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#pdm-lock-file-issues">PDM Lock File Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#redis-issues">Redis Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#redis-connection-errors">Redis Connection Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#redis-configuration-issues">Redis Configuration Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#mavlink-issues">MAVLink Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#mavlink-connection-issues">MAVLink Connection Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#mavlink-submodule-branch-issues-sitl">MAVLink Submodule Branch Issues (SITL)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#mqtt-issues">MQTT Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#mqtt-proxy-fails-on-fresh-installation">MQTT Proxy Fails on Fresh Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#port-conflicts">Port Conflicts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html#port-9000-already-in-use">Port 9000 Already in Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html#reporting-issues">Reporting Issues</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Petal App Manager</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Changelog</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/changelog.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Link to this heading"></a></h1>
<section id="version-0-2-2-2026-02-22">
<h2>Version 0.2.2 (2026-02-22)<a class="headerlink" href="#version-0-2-2-2026-02-22" title="Link to this heading"></a></h2>
<p><strong>SD Card File Deletion — Shell rm with MAVFTP Fallback:</strong></p>
<ul class="simple">
<li><p>Implemented a robust two-tier file deletion strategy in <code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy</span></code> via the new
<code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code> method:</p>
<ul>
<li><p><strong>Tier 1 — NuttX shell ``rm``</strong>: Sends <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">/path</span></code> via MAVLink <code class="docutils literal notranslate"><span class="pre">SERIAL_CONTROL</span></code> to the
PX4 NuttX shell, bypassing the MAVFTP <code class="docutils literal notranslate"><span class="pre">FileProtected</span></code> (code 9) restriction that blocks
<code class="docutils literal notranslate"><span class="pre">cmd_rm</span></code> on active log files. This is the primary method on real hardware.</p></li>
<li><p><strong>Tier 2 — MAVFTP ``cmd_rm``</strong>: Falls back to the MAVFTP <code class="docutils literal notranslate"><span class="pre">_delete()</span></code> path when the shell
<code class="docutils literal notranslate"><span class="pre">rm</span></code> command is not available (e.g. PX4 SITL builds where the NuttX shell does not expose
<code class="docutils literal notranslate"><span class="pre">rm</span></code> / <code class="docutils literal notranslate"><span class="pre">rmdir</span></code> and returns <code class="docutils literal notranslate"><span class="pre">&quot;Invalid</span> <span class="pre">command:</span> <span class="pre">rm&quot;</span></code>).</p></li>
</ul>
</li>
<li><p>All file deletion call sites in <code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy</span></code> now use <code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code>:
<code class="docutils literal notranslate"><span class="pre">delete_file()</span></code>, <code class="docutils literal notranslate"><span class="pre">delete_all_logs()</span></code> (per-file loop), and <code class="docutils literal notranslate"><span class="pre">clear_error_logs()</span></code>
(per-file loop). Directory cleanup via <code class="docutils literal notranslate"><span class="pre">rmdir</span></code> remains shell-only (best-effort) since
MAVFTP has no directory removal equivalent.</p></li>
<li><p>PX4 logger stop/start (<code class="docutils literal notranslate"><span class="pre">logger</span> <span class="pre">stop\n</span></code> / <code class="docutils literal notranslate"><span class="pre">logger</span> <span class="pre">start\n</span></code>) is issued before and after
deletion loops to release file handles, enabling both shell and MAVFTP deletion to succeed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delete_file_via_shell()</span></code> on <code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code> detects shell errors by checking
reply text for keywords: <code class="docutils literal notranslate"><span class="pre">&quot;invalid&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;no</span> <span class="pre">such&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;failed&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;not</span> <span class="pre">empty&quot;</span></code> — returning <code class="docutils literal notranslate"><span class="pre">False</span></code> so the fallback can be triggered.</p></li>
</ul>
<p><strong>Format SD Card (petal-user-journey-coordinator):</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">format_sd_card</span></code> MQTT command handler with two-phase response pattern:</p>
<ul>
<li><p><strong>Phase 1</strong>: Immediate <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code> acknowledging the command was received</p></li>
<li><p><strong>Phase 2</strong>: Executes <code class="docutils literal notranslate"><span class="pre">MAV_CMD_PREFLIGHT_STORAGE</span></code> via MAVLink, then publishes the result
(success or failure) to <code class="docutils literal notranslate"><span class="pre">command/web</span></code> via <code class="docutils literal notranslate"><span class="pre">publish_message</span></code> with command
<code class="docutils literal notranslate"><span class="pre">/&lt;petal_name&gt;/format_sd_card_status</span></code></p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">format_sd_card()</span></code> method on <code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code> that sends
<code class="docutils literal notranslate"><span class="pre">MAV_CMD_PREFLIGHT_STORAGE</span></code> and waits for <code class="docutils literal notranslate"><span class="pre">COMMAND_ACK</span></code>, returning a structured
<code class="docutils literal notranslate"><span class="pre">FormatStorageResponse</span></code> with <code class="docutils literal notranslate"><span class="pre">FormatStorageStatusCode</span></code> enum values for all ACK outcomes
(accepted, denied, timeout, unsupported, etc.)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">build_format_storage_command()</span></code> to construct the MAVLink <code class="docutils literal notranslate"><span class="pre">COMMAND_LONG</span></code> message
for <code class="docutils literal notranslate"><span class="pre">MAV_CMD_PREFLIGHT_STORAGE</span></code> with configurable <code class="docutils literal notranslate"><span class="pre">storage_id</span></code> (0–3)</p></li>
<li><p>Added Pydantic models:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">FormatStorageStatusCode</span></code> (enum) and <code class="docutils literal notranslate"><span class="pre">FormatStorageResponse</span></code> in
<code class="docutils literal notranslate"><span class="pre">petal_app_manager.models.mavlink</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FormatSDCardRequest</span></code> and <code class="docutils literal notranslate"><span class="pre">FormatSDCardStatusPayload</span></code> in
<code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> data models</p></li>
</ul>
</li>
<li><p>Active-operation guard prevents concurrent format operations</p></li>
<li><p>Full documentation added to <code class="docutils literal notranslate"><span class="pre">petal_user_journey_coordinator.rst</span></code> with Phase 1/Phase 2
response examples, error scenarios, and front-end handling instructions</p></li>
</ul>
<p><strong>Bulk Delete Flight Records (petal-flight-log):</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">bulk_delete_flight_records</span></code> MQTT command with job-based architecture:</p>
<ul>
<li><p>Creates a <code class="docutils literal notranslate"><span class="pre">BulkDeleteFlightRecordsJob</span></code> that runs in the background via the job manager</p></li>
<li><p>Supports real-time progress streaming via <code class="docutils literal notranslate"><span class="pre">subscribe_bulk_delete_flight_records</span></code> /
<code class="docutils literal notranslate"><span class="pre">unsubscribe_bulk_delete_flight_records</span></code> / <code class="docutils literal notranslate"><span class="pre">cancel_bulk_delete_flight_records</span></code></p></li>
<li><p>Deletes both ULog files from SD card (via <code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback</span></code>) and local
rosbag files, plus associated database records</p></li>
</ul>
</li>
<li><p>Added Pydantic models: <code class="docutils literal notranslate"><span class="pre">BulkDeleteFlightRecordsRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">BulkDeleteFlightRecordsResponse</span></code>,
<code class="docutils literal notranslate"><span class="pre">BulkDeleteFlightRecordsStatusPayload</span></code>, <code class="docutils literal notranslate"><span class="pre">BulkDeleteProgressPayload</span></code></p></li>
</ul>
<p><strong>Clear All ULogs (petal-flight-log):</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">clear_all_ulogs</span></code> MQTT command with job-based architecture:</p>
<ul>
<li><p>Creates a <code class="docutils literal notranslate"><span class="pre">ClearAllUlogsJob</span></code> that recursively scans date directories via MAVFTP and
deletes every <code class="docutils literal notranslate"><span class="pre">.ulg</span></code> file using <code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code></p></li>
<li><p>Supports real-time progress streaming via <code class="docutils literal notranslate"><span class="pre">subscribe_clear_all_ulogs</span></code> /
<code class="docutils literal notranslate"><span class="pre">unsubscribe_clear_all_ulogs</span></code> / <code class="docutils literal notranslate"><span class="pre">cancel_clear_all_ulogs</span></code></p></li>
<li><p>Empty date directories are cleaned up via shell <code class="docutils literal notranslate"><span class="pre">rmdir</span></code> (best-effort)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy.delete_all_logs()</span></code> inline <code class="docutils literal notranslate"><span class="pre">_scan()</span></code> returns both file list and date
directory list in a single pass, enabling cleanup of directories left empty by previous runs</p></li>
<li><p>MAVFTP base directory listing retries reduced from 5 to 2 to avoid long stalls on
empty SD cards; empty-directory listing failures (MAVFTP code 73 / timeout) are caught
gracefully and treated as “nothing to delete”</p></li>
<li><p>Per-file progress callback support via <code class="docutils literal notranslate"><span class="pre">progress_callback(current_index,</span> <span class="pre">total)</span></code> —
accepts both sync and async callables</p></li>
<li><p>Added Pydantic models: <code class="docutils literal notranslate"><span class="pre">ClearAllUlogsRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">ClearAllUlogsResponse</span></code>,
<code class="docutils literal notranslate"><span class="pre">ClearAllUlogsStatusPayload</span></code>, <code class="docutils literal notranslate"><span class="pre">ClearAllUlogsProgressPayload</span></code></p></li>
</ul>
<p><strong>Detect &amp; Clear Error Logs (petal-flight-log):</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">detect_error_logs</span></code> MQTT command (2-phase pattern):</p>
<ul>
<li><p>Scans the Pixhawk SD card for <code class="docutils literal notranslate"><span class="pre">fail_*.log</span></code> error log files via MAVFTP <strong>without
deleting</strong> them</p></li>
<li><p>Phase 1: Immediate acknowledgement via <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code></p></li>
<li><p>Phase 2: Publishes scan results (file paths, sizes, count) to <code class="docutils literal notranslate"><span class="pre">command/web</span></code> via
<code class="docutils literal notranslate"><span class="pre">publish_message</span></code> with command <code class="docutils literal notranslate"><span class="pre">/&lt;petal_name&gt;/detect_error_logs</span></code></p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">clear_error_logs</span></code> MQTT command (2-phase pattern):</p>
<ul>
<li><p>Lists <code class="docutils literal notranslate"><span class="pre">fail_*.log</span></code> files via MAVFTP, then deletes each via
<code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code> with PX4 logger stop/start</p></li>
<li><p>Phase 1: Immediate acknowledgement via <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code></p></li>
<li><p>Phase 2: Publishes deletion summary (total, deleted, failed counts) to <code class="docutils literal notranslate"><span class="pre">command/web</span></code>
via <code class="docutils literal notranslate"><span class="pre">publish_message</span></code> with command <code class="docutils literal notranslate"><span class="pre">/&lt;petal_name&gt;/clear_error_logs</span></code></p></li>
<li><p>Zero files found counts as success (<code class="docutils literal notranslate"><span class="pre">&quot;No</span> <span class="pre">error</span> <span class="pre">log</span> <span class="pre">files</span> <span class="pre">found</span> <span class="pre">under</span> <span class="pre">{base}&quot;</span></code>)</p></li>
<li><p>Partial failures reported with <code class="docutils literal notranslate"><span class="pre">PARTIAL_FAILURE</span></code> error code</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy.detect_error_logs()</span></code> — read-only listing method that returns
<code class="docutils literal notranslate"><span class="pre">{&quot;total&quot;:</span> <span class="pre">N,</span> <span class="pre">&quot;files&quot;:</span> <span class="pre">[{&quot;path&quot;:</span> <span class="pre">...,</span> <span class="pre">&quot;size_bytes&quot;:</span> <span class="pre">...},</span> <span class="pre">...]}</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy.clear_error_logs()</span></code> — returns summary dict
<code class="docutils literal notranslate"><span class="pre">{&quot;total&quot;:</span> <span class="pre">N,</span> <span class="pre">&quot;deleted&quot;:</span> <span class="pre">N,</span> <span class="pre">&quot;failed&quot;:</span> <span class="pre">N}</span></code></p></li>
<li><p>Added Pydantic models: <code class="docutils literal notranslate"><span class="pre">DetectErrorLogsRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">DetectErrorLogsResponse</span></code>,
<code class="docutils literal notranslate"><span class="pre">DetectErrorLogsStatusPayload</span></code>, <code class="docutils literal notranslate"><span class="pre">ClearErrorLogsRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">ClearErrorLogsResponse</span></code>,
<code class="docutils literal notranslate"><span class="pre">ClearErrorLogsStatusPayload</span></code></p></li>
</ul>
<p><strong>Single Flight Record Deletion (petal-flight-log):</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delete_flight_record</span></code> handler now uses <code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy.delete_file()</span></code> which calls
<code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code> (shell rm → MAVFTP fallback) instead of relying solely
on shell rm</p></li>
</ul>
<p><strong>MAVFTP Proxy Improvements:</strong></p>
<ul class="simple">
<li><p>Phased out direct MAVFTP <code class="docutils literal notranslate"><span class="pre">cmd_rm</span></code> usage from all high-level deletion methods; all file
deletions now go through <code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code> which provides automatic fallback</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_BlockingParser.clear_error_logs()</span></code> retained for legacy/direct calls but the primary
async path (<code class="docutils literal notranslate"><span class="pre">MavLinkFTPProxy.clear_error_logs()</span></code>) uses shell rm with MAVFTP fallback</p></li>
<li><p>FTP listing retries for sub-directories reduced from 5 to 1 to avoid long stalls on
directories that were emptied by deletion</p></li>
<li><p>Empty base directory listing failures (MAVFTP timeout code 73) caught with try/except
in <code class="docutils literal notranslate"><span class="pre">_scan()</span></code> and treated as empty — prevents crashes when the log directory has been
fully cleared</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FTPDeleteError</span></code> exception class added for structured MAVFTP error reporting with
FTP error code and path</p></li>
</ul>
<p><strong>Redis Compatibility Fix:</strong></p>
<ul class="simple">
<li><p>Pinned <code class="docutils literal notranslate"><span class="pre">redis</span></code> dependency to <code class="docutils literal notranslate"><span class="pre">&gt;=6.2.0,&lt;7.0.0</span></code> in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> to fix a
compatibility issue where <code class="docutils literal notranslate"><span class="pre">redis&gt;=7.0</span></code> introduced breaking API changes that caused
connection and command failures at runtime</p></li>
</ul>
<p><strong>Documentation Updates:</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">detect_error_logs</span></code> command documentation to <code class="docutils literal notranslate"><span class="pre">petal_flight_log.rst</span></code>:
payload, Phase 1 responses, Phase 2 status publish examples (files found, no files,
execution error), <code class="docutils literal notranslate"><span class="pre">DetectErrorLogsStatusPayload</span></code> field reference</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">clear_error_logs</span></code> command documentation to <code class="docutils literal notranslate"><span class="pre">petal_flight_log.rst</span></code>:
payload, Phase 1 responses, Phase 2 status publish examples (files deleted, no files,
partial failure, execution error), <code class="docutils literal notranslate"><span class="pre">ClearErrorLogsStatusPayload</span></code> field reference</p></li>
<li><p>Updated MQTT Topics Reference in <code class="docutils literal notranslate"><span class="pre">petal_flight_log.rst</span></code>:</p>
<ul>
<li><p>Commands: <code class="docutils literal notranslate"><span class="pre">petal-flight-log/detect_error_logs</span></code>, <code class="docutils literal notranslate"><span class="pre">petal-flight-log/clear_error_logs</span></code></p></li>
<li><p>Published topics: <code class="docutils literal notranslate"><span class="pre">/petal-flight-log/detect_error_logs</span></code>,
<code class="docutils literal notranslate"><span class="pre">/petal-flight-log/clear_error_logs</span></code></p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">format_sd_card</span></code> command documentation to <code class="docutils literal notranslate"><span class="pre">petal_user_journey_coordinator.rst</span></code>
with full two-phase response pattern, including Phase 1 immediate/error responses,
Phase 2 status publish (success/failure), <code class="docutils literal notranslate"><span class="pre">FormatSDCardStatusPayload</span></code> field reference,
and front-end handling instructions</p></li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.6</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.7</span></code>:</p>
<ul>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">bulk_delete_flight_records</span></code> job-based MQTT command with progress
streaming (subscribe/unsubscribe/cancel)</p></li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">clear_all_ulogs</span></code> job-based MQTT command with progress streaming</p></li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">detect_error_logs</span></code> 2-phase MQTT command for scanning fail_*.log files</p></li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">clear_error_logs</span></code> 2-phase MQTT command for deleting fail_*.log files</p></li>
<li><p><strong>Improvement</strong>: All file deletion uses <code class="docutils literal notranslate"><span class="pre">_delete_file_with_fallback()</span></code> (shell rm → MAVFTP)
for hardware and SITL compatibility</p></li>
<li><p><strong>Improvement</strong>: MAVFTP listing resilience (reduced retries, graceful empty-dir handling)</p></li>
<li><p><strong>Fix</strong>: Progress reporting no longer stuck at 10% — <code class="docutils literal notranslate"><span class="pre">progress_callback</span></code> propagated
correctly through deletion loops</p></li>
<li><p><strong>Fix</strong>: Empty date directories cleaned up after deletion via shell <code class="docutils literal notranslate"><span class="pre">rmdir</span></code></p></li>
<li><p><strong>Fix</strong>: FTP listing crash on empty base directory (code 73) caught gracefully</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.12</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.13</span></code>:</p>
<ul>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">format_sd_card</span></code> MQTT command with 2-phase response pattern
(immediate acknowledgement + status publish to <code class="docutils literal notranslate"><span class="pre">command/web</span></code>)</p></li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">FormatSDCardRequest</span></code> and <code class="docutils literal notranslate"><span class="pre">FormatSDCardStatusPayload</span></code> Pydantic models</p></li>
<li><p><strong>Feature</strong>: Active-operation guard prevents concurrent SD card format operations</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-2-1-2026-02-12">
<h2>Version 0.2.1 (2026-02-12)<a class="headerlink" href="#version-0-2-1-2026-02-12" title="Link to this heading"></a></h2>
<p><strong>Bulk Parameter Two-Phase Response Pattern:</strong></p>
<ul class="simple">
<li><p>Refactored <code class="docutils literal notranslate"><span class="pre">bulk_set_parameters</span></code> and <code class="docutils literal notranslate"><span class="pre">bulk_get_parameters</span></code> MQTT handlers to use the same
two-phase response pattern as <code class="docutils literal notranslate"><span class="pre">reboot_autopilot</span></code>:</p>
<ul>
<li><p><strong>Phase 1 (Immediate Acknowledgement)</strong>: <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code> is now called immediately
after message validation and active-operation checks, before executing the MAVLink bulk
operation. This prevents the front-end from timing out on long-running parameter operations.</p></li>
<li><p><strong>Phase 2 (Status Publish)</strong>: Results are published to <code class="docutils literal notranslate"><span class="pre">command/web</span></code> via <code class="docutils literal notranslate"><span class="pre">publish_message</span></code>
with command <code class="docutils literal notranslate"><span class="pre">/&lt;petal_name&gt;/bulk-parameter-set</span></code> and <code class="docutils literal notranslate"><span class="pre">/&lt;petal_name&gt;/bulk-parameter-get</span></code>
respectively, once the operation completes (successfully, partially, or with errors).</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">BulkParameterStatusPayload</span></code> Pydantic model for structured bulk parameter status
payloads published via MQTT. Fields: <code class="docutils literal notranslate"><span class="pre">success</span></code>, <code class="docutils literal notranslate"><span class="pre">status</span></code>, <code class="docutils literal notranslate"><span class="pre">message</span></code>, <code class="docutils literal notranslate"><span class="pre">error_code</span></code>,
<code class="docutils literal notranslate"><span class="pre">data</span></code> (contains <code class="docutils literal notranslate"><span class="pre">BulkParameterResponse</span></code>), and <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
<li><p>All MQTT publish payloads now use <code class="docutils literal notranslate"><span class="pre">BulkParameterStatusPayload.model_dump(mode=&quot;json&quot;)</span></code>
instead of hardcoded dictionaries, ensuring consistent serialization and validation.</p></li>
<li><p>Error handling in the execution phase (Phase 2) now publishes error status via MQTT
<code class="docutils literal notranslate"><span class="pre">publish_message</span></code> with <code class="docutils literal notranslate"><span class="pre">EXECUTION_ERROR</span></code> or <code class="docutils literal notranslate"><span class="pre">NO_PARAMETERS_CONFIRMED</span></code> error codes,
so the front-end is always notified of failures.</p></li>
</ul>
<p><strong>Documentation Updates:</strong></p>
<ul class="simple">
<li><p>Updated petal-user-journey-coordinator documentation version from <code class="docutils literal notranslate"><span class="pre">v0.1.11</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.12</span></code></p></li>
<li><p>Rewrote <code class="docutils literal notranslate"><span class="pre">bulk_set_parameters</span></code> and <code class="docutils literal notranslate"><span class="pre">bulk_get_parameters</span></code> command documentation with full
two-phase response pattern details:</p>
<ul>
<li><p>Phase 1 immediate response and error response examples</p></li>
<li><p>Phase 2 status publish examples (success, partial failure, total failure)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BulkParameterStatusPayload</span></code> field reference</p></li>
<li><p>Front-end handling instructions</p></li>
</ul>
</li>
<li><p>Added new published topics to MQTT Topics Reference:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/petal-user-journey-coordinator/bulk-parameter-set</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/petal-user-journey-coordinator/bulk-parameter-get</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.11</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.12</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: <code class="docutils literal notranslate"><span class="pre">bulk_set_parameters</span></code> and <code class="docutils literal notranslate"><span class="pre">bulk_get_parameters</span></code> handlers refactored with
two-phase response pattern: immediate <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code> acknowledgement followed by
<code class="docutils literal notranslate"><span class="pre">publish_message</span></code> with results to <code class="docutils literal notranslate"><span class="pre">command/web</span></code></p></li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">BulkParameterStatusPayload</span></code> Pydantic model for structured MQTT status payloads</p></li>
<li><p><strong>Improvement</strong>: All bulk parameter MQTT publish payloads now use validated Pydantic models
instead of hardcoded dictionaries</p></li>
<li><p><strong>Improvement</strong>: Execution errors in bulk parameter operations now always publish error
status to <code class="docutils literal notranslate"><span class="pre">command/web</span></code>, ensuring the front-end is notified of failures</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-2-0-2026-02-12">
<h2>Version 0.2.0 (2026-02-12)<a class="headerlink" href="#version-0-2-0-2026-02-12" title="Link to this heading"></a></h2>
<p><strong>``&#64;mqtt_action`` Decorator &amp; MQTT Command Handler Refactor:</strong></p>
<ul class="simple">
<li><p>Introduced the <code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code> decorator in <code class="docutils literal notranslate"><span class="pre">petal_app_manager.plugins.decorators</span></code> for
declarative MQTT command handler registration:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">command</span></code> parameter: specifies the command suffix (framework auto-prefixes the petal name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cpu_heavy</span></code> parameter (default <code class="docutils literal notranslate"><span class="pre">False</span></code>): when <code class="docutils literal notranslate"><span class="pre">True</span></code>, offloads handler execution to a
thread-pool executor to prevent event-loop starvation from CPU-bound work (e.g. NumPy, image
processing, large serialization)</p></li>
</ul>
</li>
<li><p>Added base-class infrastructure in <code class="docutils literal notranslate"><span class="pre">Petal</span></code> (<code class="docutils literal notranslate"><span class="pre">plugins/base.py</span></code>):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_collect_mqtt_actions()</span></code>: scans all instance methods/attributes for <code class="docutils literal notranslate"><span class="pre">__mqtt_action__</span></code>
metadata and builds the dispatch table</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_mqtt_master_command_handler()</span></code>: single registered MQTT handler that dispatches incoming
commands to the correct <code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code> handler, with automatic error responses for unknown
commands and organization-ID guard logic</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_setup_mqtt_actions()</span></code>: called at startup to wire everything up and register the master
handler with the MQTT proxy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">has_mqtt_actions()</span></code>: quick check for whether a petal has any decorated handlers</p></li>
</ul>
</li>
<li><p>Removed legacy boilerplate from all refactored petals:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_setup_command_handlers()</span></code> methods (manual dict of command → handler)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_master_command_handler()</span></code> methods (manual if/elif dispatch)</p></li>
<li><p>Manual <code class="docutils literal notranslate"><span class="pre">register_handler()</span></code> calls in <code class="docutils literal notranslate"><span class="pre">_setup_mqtt_topics()</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>Documentation Updates:</strong></p>
<ul class="simple">
<li><p>Added <a class="reference internal" href="development_contribution/adding_petals.html#mqtt-action-decorator"><span class="std std-ref">MQTT Command Handlers (&#64;mqtt_action)</span></a> section to <em>Adding a New Petal</em> guide covering:</p>
<ul>
<li><p>Basic usage, handler signature, <code class="docutils literal notranslate"><span class="pre">cpu_heavy</span></code> parameter</p></li>
<li><p>Under-the-hood dispatch mechanism</p></li>
<li><p>Dynamic/factory handler pattern</p></li>
<li><p>Migration guide from the legacy manual dispatch pattern</p></li>
</ul>
</li>
<li><p>Replaced MQTTProxy placeholder in <em>Using Proxies</em> guide with full documentation:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code>-based command handling (recommended)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">publish_message()</span></code> and <code class="docutils literal notranslate"><span class="pre">send_command_response()</span></code> public API</p></li>
<li><p>Method reference table</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cpu_heavy</span></code> flag explanation</p></li>
<li><p>Status broadcasting example</p></li>
</ul>
</li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.5</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.6</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: All 10 MQTT command handlers now registered via <code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code> decorator,
eliminating the manual command handler registry and master dispatch method:
<code class="docutils literal notranslate"><span class="pre">fetch_flight_records</span></code>, <code class="docutils literal notranslate"><span class="pre">subscribe_fetch_flight_records</span></code>,
<code class="docutils literal notranslate"><span class="pre">unsubscribe_fetch_flight_records</span></code>, <code class="docutils literal notranslate"><span class="pre">cancel_fetch_flight_records</span></code>,
<code class="docutils literal notranslate"><span class="pre">fetch_existing_flight_records</span></code>, <code class="docutils literal notranslate"><span class="pre">start_sync_flight_record</span></code>,
<code class="docutils literal notranslate"><span class="pre">subscribe_sync_job_value_stream</span></code>, <code class="docutils literal notranslate"><span class="pre">unsubscribe_sync_job_value_stream</span></code>,
<code class="docutils literal notranslate"><span class="pre">cancel_sync_job</span></code>, <code class="docutils literal notranslate"><span class="pre">delete_flight_record</span></code></p></li>
<li><p><strong>Improvement</strong>: Redis command acknowledgment and message handling methods are now fully
asynchronous (<code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> / <code class="docutils literal notranslate"><span class="pre">await</span></code>), ensuring non-blocking behavior</p></li>
<li><p><strong>Improvement</strong>: Fire-and-forget scheduling of long-running Redis command handlers now uses
<code class="docutils literal notranslate"><span class="pre">asyncio.create_task</span></code> instead of <code class="docutils literal notranslate"><span class="pre">asyncio.run_coroutine_threadsafe</span></code></p></li>
<li><p><strong>Fix</strong>: <code class="docutils literal notranslate"><span class="pre">sync_px4_time</span></code> serial handler converted to <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code>, aligning with the
rest of the async codebase</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.10</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.11</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: Replaced manual <code class="docutils literal notranslate"><span class="pre">_command_handlers</span></code> registry and <code class="docutils literal notranslate"><span class="pre">_master_command_handler</span></code>
with automatic handler discovery and dispatch via <code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code> decorator and the base
class <code class="docutils literal notranslate"><span class="pre">Petal._mqtt_master_command_handler</span></code></p></li>
<li><p><strong>Refactor</strong>: All static handlers decorated with <code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code>; dynamically created
parameter and pub/sub handlers now attach <code class="docutils literal notranslate"><span class="pre">__mqtt_action__</span></code> metadata for automatic
discovery and registration</p></li>
<li><p><strong>Improvement</strong>: Converted internal handler functions (<code class="docutils literal notranslate"><span class="pre">_handler</span></code>, <code class="docutils literal notranslate"><span class="pre">_position_handler</span></code>,
<code class="docutils literal notranslate"><span class="pre">_attitude_handler</span></code>, <code class="docutils literal notranslate"><span class="pre">_statustext_handler</span></code>) to <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> for asynchronous message
processing</p></li>
<li><p><strong>Fix</strong>: Fixed missing <code class="docutils literal notranslate"><span class="pre">await</span></code> on <code class="docutils literal notranslate"><span class="pre">asyncio.sleep(0.1)</span></code> in a test handler</p></li>
<li><p><strong>Cleanup</strong>: Removed unused <code class="docutils literal notranslate"><span class="pre">RedisProxy</span></code> import</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.9</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.10</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: 3 MQTT command handlers (<code class="docutils literal notranslate"><span class="pre">mission_plan</span></code>, <code class="docutils literal notranslate"><span class="pre">rtl</span></code>, <code class="docutils literal notranslate"><span class="pre">goto</span></code>) now registered
via <code class="docutils literal notranslate"><span class="pre">&#64;mqtt_action</span></code> decorator, removing legacy <code class="docutils literal notranslate"><span class="pre">_mqtt_subscribe_to_mission_plan</span></code> and
<code class="docutils literal notranslate"><span class="pre">_mqtt_command_handler_master</span></code></p></li>
<li><p><strong>Improvement</strong>: All MAVLink message handler methods in <code class="docutils literal notranslate"><span class="pre">fc_status_provider.py</span></code> converted
to <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> for non-blocking message processing</p></li>
<li><p><strong>Improvement</strong>: All Redis and MAVLink publishing functions in <code class="docutils literal notranslate"><span class="pre">mission.py</span></code>,
<code class="docutils literal notranslate"><span class="pre">mission_step.py</span></code>, and <code class="docutils literal notranslate"><span class="pre">heartbeat.py</span></code> converted to <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code></p></li>
<li><p><strong>Improvement</strong>: Updated type annotations for MAVLink subscription setup and teardown
functions to require async callbacks</p></li>
<li><p><strong>Fix</strong>: Fixed <code class="docutils literal notranslate"><span class="pre">msg_id</span></code> <code class="docutils literal notranslate"><span class="pre">NameError</span></code> bug in legacy master handler (caught during refactor)</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-warehouse</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.8</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.9</span></code>:</p>
<ul>
<li><p><strong>Improvement</strong>: Captured main event loop (<code class="docutils literal notranslate"><span class="pre">self._loop</span></code>) from <code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code>
during initialization for safe coroutine scheduling from background threads</p></li>
<li><p><strong>Improvement</strong>: <code class="docutils literal notranslate"><span class="pre">send_position</span></code> and <code class="docutils literal notranslate"><span class="pre">send_target_traj</span></code> WebSocket methods now use
<code class="docutils literal notranslate"><span class="pre">asyncio.run_coroutine_threadsafe</span></code> to execute in the correct event loop, preventing
threading issues</p></li>
<li><p><strong>Improvement</strong>: MAVLink message handler functions (<code class="docutils literal notranslate"><span class="pre">handler_pos</span></code>, <code class="docutils literal notranslate"><span class="pre">handler_att</span></code>,
<code class="docutils literal notranslate"><span class="pre">handler_target_trajectory</span></code>) converted to <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code></p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.3</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.4</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: Message router refactored to support async handlers; <code class="docutils literal notranslate"><span class="pre">route()</span></code> method is now
<code class="docutils literal notranslate"><span class="pre">async</span></code> and awaits handler results if they are coroutines</p></li>
<li><p><strong>Refactor</strong>: MAVLink server main loop and message draining/handling methods converted to
<code class="docutils literal notranslate"><span class="pre">async</span></code> for non-blocking message processing and routing</p></li>
<li><p><strong>Refactor</strong>: Mission upload and download protocol handlers (<code class="docutils literal notranslate"><span class="pre">upload.py</span></code>, <code class="docutils literal notranslate"><span class="pre">download.py</span></code>)
converted to <code class="docutils literal notranslate"><span class="pre">async</span></code>, including <code class="docutils literal notranslate"><span class="pre">request_waypoint</span></code>, <code class="docutils literal notranslate"><span class="pre">_finalize_upload</span></code>, and all
mission item/count/request handlers</p></li>
<li><p><strong>Refactor</strong>: Mission translation and Redis publishing logic (<code class="docutils literal notranslate"><span class="pre">translation.py</span></code>) converted
to <code class="docutils literal notranslate"><span class="pre">async</span></code>; all Redis interactions are now properly awaited</p></li>
<li><p><strong>Improvement</strong>: All internal handler methods in bridge and connection modules converted to
<code class="docutils literal notranslate"><span class="pre">async</span></code> to ensure the entire message handling pipeline is non-blocking</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-62-2026-02-06">
<h2>Version 0.1.62 (2026-02-06)<a class="headerlink" href="#version-0-1-62-2026-02-06" title="Link to this heading"></a></h2>
<p><strong>New Features:</strong></p>
<ul class="simple">
<li><p>Added single-motor ESC calibration (<code class="docutils literal notranslate"><span class="pre">esc_calibration_single</span></code>) documentation and Postman API collection entries:</p>
<ul>
<li><p>Detailed step-by-step workflow: initialization, maximum throttle, minimum throttle, safe stop</p></li>
<li><p>Emergency stop handling via <code class="docutils literal notranslate"><span class="pre">force_cancel_calibration</span></code></p></li>
<li><p>Separate Postman requests for each calibration step targeting <code class="docutils literal notranslate"><span class="pre">{{CALLBACK_URL}}/mqtt-callback/callback</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>PX4 Reboot Workflow Improvements:</strong></p>
<ul class="simple">
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">reboot_px4</span></code> command documentation to clarify heartbeat-based reboot confirmation:</p>
<ul>
<li><p>Reboot is confirmed via heartbeat drop (PX4 shutting down) and heartbeat return (PX4 alive again)</p></li>
<li><p>Updated immediate response message to specify confirmed status is published to <code class="docutils literal notranslate"><span class="pre">command/web</span></code></p></li>
<li><p>Clarified client timing expectations: reboot confirmation can take up to ~35 seconds</p></li>
</ul>
</li>
<li><p>Improved Postman reboot request descriptions and payloads to reflect the confirmed reboot flow</p></li>
</ul>
<p><strong>Documentation &amp; Metadata Updates:</strong></p>
<ul class="simple">
<li><p>Updated petal-user-journey-coordinator documentation version from <code class="docutils literal notranslate"><span class="pre">v0.1.8</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.10</span></code></p></li>
<li><p>Improved Postman collection metadata and preview settings for better usability</p></li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.9</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.10</span></code>:</p>
<ul>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">ESCCalibrationSingleController</span></code> class implementing step-by-step single-motor ESC calibration workflow with interface setup, per-motor parameter configuration, and throttle control</p></li>
<li><p><strong>Feature</strong>: Introduced <code class="docutils literal notranslate"><span class="pre">ESCCalibrationSinglePayload</span></code> Pydantic model with motor index, calibration state, safety timeout, throttle commands, and ESC interface selection</p></li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">ESC_CALIBRATION_SINGLE</span></code> operation mode to the <code class="docutils literal notranslate"><span class="pre">OperationMode</span></code> enum</p></li>
<li><p><strong>Integration</strong>: Registered <code class="docutils literal notranslate"><span class="pre">ESCCalibrationSingleController</span></code> and <code class="docutils literal notranslate"><span class="pre">ESCCalibrationSinglePayload</span></code> in the plugin startup routine and command handler setup</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-61-2026-02-03">
<h2>Version 0.1.61 (2026-02-03)<a class="headerlink" href="#version-0-1-61-2026-02-03" title="Link to this heading"></a></h2>
<p><strong>Documentation Updates:</strong></p>
<ul class="simple">
<li><p>Added comprehensive MQTT Topics Reference sections to petal documentation:</p>
<ul>
<li><p><strong>petal-user-journey-coordinator</strong>: Lists all commands received on <code class="docutils literal notranslate"><span class="pre">command/edge</span></code> and topics published to <code class="docutils literal notranslate"><span class="pre">command/web</span></code></p></li>
<li><p><strong>petal-flight-log</strong>: Lists all commands received on <code class="docutils literal notranslate"><span class="pre">command/edge</span></code> and topics published to <code class="docutils literal notranslate"><span class="pre">command/web</span></code></p></li>
</ul>
</li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">reboot_px4</span></code> command documentation with two-phase response pattern:</p>
<ul>
<li><p>Phase 1: Immediate <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code> for command acknowledgement</p></li>
<li><p>Phase 2: Async <code class="docutils literal notranslate"><span class="pre">publish_message</span></code> to <code class="docutils literal notranslate"><span class="pre">command/web</span></code> with reboot status</p></li>
<li><p>Documented all error response types (<code class="docutils literal notranslate"><span class="pre">OPERATION_ACTIVE</span></code>, <code class="docutils literal notranslate"><span class="pre">VALIDATION_ERROR</span></code>, <code class="docutils literal notranslate"><span class="pre">HANDLER_ERROR</span></code>)</p></li>
<li><p>Added front-end handling instructions for status subscription</p></li>
</ul>
</li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.8</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.9</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: Refactored <code class="docutils literal notranslate"><span class="pre">_reboot_px4_message_handler</span></code> with two-phase response pattern:</p>
<ul>
<li><p>Immediate <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code> acknowledges command receipt</p></li>
<li><p>Sequential <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">reboot_autopilot</span></code> executes the reboot</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">publish_message</span></code> publishes final status to <code class="docutils literal notranslate"><span class="pre">/petal-user-journey-coordinator/reboot_px4_status</span></code></p></li>
</ul>
</li>
<li><p><strong>Feature</strong>: Added <code class="docutils literal notranslate"><span class="pre">RebootPX4StatusPayload</span></code> Pydantic model for structured reboot status payloads</p></li>
<li><p><strong>Fix</strong>: Added missing <code class="docutils literal notranslate"><span class="pre">return</span></code> statement after <code class="docutils literal notranslate"><span class="pre">ValidationError</span></code> handler to prevent fall-through execution</p></li>
<li><p><strong>Improvement</strong>: All error responses (validation, handler errors) now sent immediately via <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-60-2026-01-30">
<h2>Version 0.1.60 (2026-01-30)<a class="headerlink" href="#version-0-1-60-2026-01-30" title="Link to this heading"></a></h2>
<p><strong>Plugin Loading &amp; Startup Refactor:</strong></p>
<ul class="simple">
<li><p>Separated petal loading into two distinct phases for finer control and clearer logging:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">initialize_petals</span></code>: Loads and configures petals without starting them</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">startup_petals</span></code>: Starts up and mounts petals to the FastAPI app</p></li>
<li><p>Original <code class="docutils literal notranslate"><span class="pre">load_petals</span></code> function now wraps these two steps</p></li>
</ul>
</li>
<li><p>Updated main application startup logic to use new initialization pattern, ensuring petals are loaded and started sequentially and safely in the background</p></li>
</ul>
<p><strong>MQTT Callback &amp; Routing Improvements:</strong></p>
<ul class="simple">
<li><p>Registered MQTT callback router under <code class="docutils literal notranslate"><span class="pre">/mqtt-callback</span></code> path only when MQTT proxy and callbacks are enabled</p></li>
<li><p>Changed default MQTT callback port to <code class="docutils literal notranslate"><span class="pre">9000</span></code> to match main app’s port (previously used dedicated server on port 3005)</p></li>
<li><p>Updated Postman collection and FastAPI launch configuration for new callback endpoint URL</p></li>
</ul>
<p><strong>Proxy &amp; Threading Enhancements:</strong></p>
<ul class="simple">
<li><p>Added explicit thread name prefixes to all proxy thread pools and background threads for easier debugging and log tracing:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">S3BucketProxy</span></code>: Thread pool naming for S3 operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CloudProxy</span></code>: Thread pool naming for cloud operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LocalDbProxy</span></code>: Thread pool naming for database operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code>: I/O and worker thread naming</p></li>
</ul>
</li>
<li><p>Exposed <code class="docutils literal notranslate"><span class="pre">PETAL_REDIS_WORKER_THREADS</span></code> environment variable to configure Redis proxy worker threads</p></li>
<li><p>Increased Redis proxy <code class="docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code> workers to prevent blocking listen loops from starving key/value operations</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">_invoke_callback_safely()</span></code> method in Redis proxy for proper async callback handling from worker threads using <code class="docutils literal notranslate"><span class="pre">asyncio.run_coroutine_threadsafe()</span></code></p></li>
</ul>
<p><strong>Health Check Logic:</strong></p>
<ul class="simple">
<li><p>Simplified MavLink proxy health check to only consider main connection status, excluding <code class="docutils literal notranslate"><span class="pre">leaf_fc_connected</span></code> flag</p></li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-warehouse</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.7</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.8</span></code>:</p>
<ul>
<li><p><strong>Version Management</strong>: <code class="docutils literal notranslate"><span class="pre">PetalWarehouse.version</span></code> attribute now dynamically references package <code class="docutils literal notranslate"><span class="pre">__version__</span></code> instead of being hardcoded</p></li>
<li><p><strong>Thread Naming</strong>: Background thread for sending position and yaw data to Blender now named <code class="docutils literal notranslate"><span class="pre">BlenderPositionSender</span></code> for improved debugging and monitoring</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-59-2026-01-27">
<h2>Version 0.1.59 (2026-01-27)<a class="headerlink" href="#version-0-1-59-2026-01-27" title="Link to this heading"></a></h2>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">leaf-pymavlink</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.15</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.16</span></code>:</p>
<ul>
<li><p><strong>Critical Fix</strong>: Fixed PyPI wheel builds missing DroneLeaf LEAF_* MAVLink messages</p></li>
<li><p>Root cause was pip’s build isolation preventing the <code class="docutils literal notranslate"><span class="pre">MDEF</span></code> environment variable from reaching setup.py</p></li>
<li><p>CI workflow now uses <code class="docutils literal notranslate"><span class="pre">--no-build-isolation</span></code> with explicit dependency installation to ensure custom message definitions are included in wheels</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.7</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.9</span></code>:</p>
<ul>
<li><p>Pinned <code class="docutils literal notranslate"><span class="pre">leaf-pymavlink</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.16</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-57-2026-01-18">
<h2>Version 0.1.57 (2026-01-18)<a class="headerlink" href="#version-0-1-57-2026-01-18" title="Link to this heading"></a></h2>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">leaf-pymavlink</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.15</span></code></p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.6</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.7</span></code>:</p>
<ul>
<li><p>Pinned <code class="docutils literal notranslate"><span class="pre">leaf-pymavlink</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.15</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-56-2026-01-17">
<h2>Version 0.1.56 (2026-01-17)<a class="headerlink" href="#version-0-1-56-2026-01-17" title="Link to this heading"></a></h2>
<p><strong>FTP Download Error Handling Improvements:</strong></p>
<ul class="simple">
<li><p>Improved error handling in <code class="docutils literal notranslate"><span class="pre">external.py</span></code> FTP download logic to ensure failed or cancelled downloads raise a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>, log the error, and clean up partial files</p></li>
<li><p>Added more granular error logging and FTP state reset logic after failures or cancellations, including after non-zero return codes from FTP operations</p></li>
<li><p>Ensured FTP state is reset after each download attempt and after recovering from temp files, preventing state leakage between operations</p></li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.4</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.5</span></code>:</p>
<ul>
<li><p><strong>Error Handling Improvements</strong>:</p>
<ul>
<li><p>Added specific handling for <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> during MAVFTP ULog downloads, providing clearer error messages when the remote file cannot be opened</p></li>
<li><p>Changed logging for failed ULog downloads to exclude exception tracebacks for both MAVLink and MAVFTP errors, making logs less verbose</p></li>
</ul>
</li>
<li><p><strong>Reliability Enhancements</strong>:</p>
<ul>
<li><p>Ensured flight record status is updated in the cloud database before exceptions are re-raised during sync job errors, improving consistency between job state and record status</p></li>
</ul>
</li>
<li><p><strong>Logic and Workflow Adjustments</strong>:</p>
<ul>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">start_sync_flight_record</span></code> to always attempt ULog and Rosbag uploads if present, regardless of whether an S3 key already exists</p></li>
<li><p>Added handling for files from both “pixhawk” and “local” storage types</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.5</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.6</span></code>:</p>
<ul>
<li><p><strong>Mission Abort and Drone State Handling</strong>:</p>
<ul>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">abort</span></code> method to handle abort requests during takeoff or landing states</p></li>
<li><p>Mission is cancelled locally without sending stop trajectory to flight controller during these states, preventing unsafe interruptions</p></li>
<li><p>Added new <code class="docutils literal notranslate"><span class="pre">is_drone_taking_off</span></code> method in <code class="docutils literal notranslate"><span class="pre">fc_status_provider.py</span></code></p></li>
</ul>
</li>
<li><p><strong>MQTT Communication and Error Handling</strong>:</p>
<ul>
<li><p>Refactored all MQTT command handlers to use new <code class="docutils literal notranslate"><span class="pre">send_command_response</span></code> method for sending responses and errors</p></li>
<li><p>Replaced direct calls to <code class="docutils literal notranslate"><span class="pre">publish_message</span></code> for more consistent and reliable client communication</p></li>
</ul>
</li>
<li><p><strong>Startup and Proxy Initialization</strong>:</p>
<ul>
<li><p>Improved startup logic by separating proxy initialization from asynchronous MQTT topic setup</p></li>
<li><p>Added more robust logging and retry logic for MQTT proxy availability</p></li>
<li><p>Simplified <code class="docutils literal notranslate"><span class="pre">async_startup</span></code> method, delegating complex logic to the main application</p></li>
</ul>
</li>
<li><p><strong>Mission Queue and RTL Safety</strong>:</p>
<ul>
<li><p>Reduced mission queue size from 10 to 1 to avoid overloading the mission manager</p></li>
<li><p>Decreased RTL (Return-To-Launch) mission return speed from 0.5 m/s to 0.1 m/s for safer drone returns</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.2</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.3</span></code>:</p>
<ul>
<li><p><strong>Mission Translation Logic Updates</strong>:</p>
<ul>
<li><p>Replaced all uses of <code class="docutils literal notranslate"><span class="pre">calculate_yaw_to_target</span></code> with <code class="docutils literal notranslate"><span class="pre">calculate_yaw_to_target_ENU</span></code> in <code class="docutils literal notranslate"><span class="pre">mission_translator.py</span></code></p></li>
<li><p>Affects takeoff, waypoint, land, and RTL command handling to ensure yaw calculations consistently use the ENU coordinate system</p></li>
</ul>
</li>
<li><p><strong>Logging Changes</strong>:</p>
<ul>
<li><p>Changed logging level for local position NED updates in <code class="docutils literal notranslate"><span class="pre">gps.py</span></code> from <code class="docutils literal notranslate"><span class="pre">info</span></code> to <code class="docutils literal notranslate"><span class="pre">debug</span></code>, reducing log verbosity for frequent updates</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-54-2026-01-15">
<h2>Version 0.1.54 (2026-01-15)<a class="headerlink" href="#version-0-1-54-2026-01-15" title="Link to this heading"></a></h2>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.3</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.4</span></code>:</p></li>
<li><p>Pinned <code class="docutils literal notranslate"><span class="pre">leaf-pymavlink</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.13</span></code> for MAVLink compatibility stability</p></li>
</ul>
</section>
<section id="version-0-1-53-2026-01-15">
<h2>Version 0.1.53 (2026-01-15)<a class="headerlink" href="#version-0-1-53-2026-01-15" title="Link to this heading"></a></h2>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.3</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.4</span></code>:</p>
<ul>
<li><p><strong>Feature</strong>: Improved progress tracking with weighted job distribution</p></li>
<li><p>ULog download now accounts for 90% of sync progress when present</p></li>
<li><p>S3 upload jobs split remaining 10% (5% each) when ULog download exists</p></li>
<li><p>S3 jobs split 100% evenly (50% each, or 100% if single job) when no ULog download</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">_calculate_job_weights()</span></code> method for dynamic weight calculation</p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">_monitor_sub_job_progress()</span></code> to use weight-based progress slices</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-52-2026-01-14">
<h2>Version 0.1.52 (2026-01-14)<a class="headerlink" href="#version-0-1-52-2026-01-14" title="Link to this heading"></a></h2>
<p><strong>Configuration Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">proxies.yaml</span></code> to replace <code class="docutils literal notranslate"><span class="pre">petal-mission-planner</span></code> with <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code></p></li>
<li><p>Updated plugin entry points for <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> and <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code></p></li>
<li><p>Revised petal dependencies for more accurate service configuration</p></li>
</ul>
<p><strong>New Proxy Functionality:</strong></p>
<ul class="simple">
<li><p>Added async <code class="docutils literal notranslate"><span class="pre">head_object</span></code> method to <code class="docutils literal notranslate"><span class="pre">bucket.py</span></code> for checking S3 object existence and retrieving metadata</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">build_request_message_command</span></code> method to <code class="docutils literal notranslate"><span class="pre">external.py</span></code> for requesting specific MAVLink messages</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">build_shell_serial_control_msgs</span></code> method to <code class="docutils literal notranslate"><span class="pre">external.py</span></code> for sending shell commands to PX4 via MAVLink</p></li>
</ul>
<p><strong>Logging Improvements:</strong></p>
<ul class="simple">
<li><p>Enhanced application startup and shutdown logs in <code class="docutils literal notranslate"><span class="pre">main.py</span></code> with clearer, more prominent status messages</p></li>
</ul>
<p><strong>Health Model Validation:</strong></p>
<ul class="simple">
<li><p>Migrated all Pydantic v1 <code class="docutils literal notranslate"><span class="pre">&#64;validator</span></code> decorators to Pydantic v2 <code class="docutils literal notranslate"><span class="pre">&#64;field_validator</span></code> in <code class="docutils literal notranslate"><span class="pre">models/health.py</span></code>:</p>
<ul>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> decorator and proper type hints to all validators</p></li>
<li><p>Updated import from <code class="docutils literal notranslate"><span class="pre">validator</span></code> to <code class="docutils literal notranslate"><span class="pre">field_validator</span></code></p></li>
<li><p>Resolves deprecation warnings for Pydantic v2.0+ (to be removed in v3.0)</p></li>
</ul>
</li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Upgraded <code class="docutils literal notranslate"><span class="pre">leaf-pymavlink</span></code>, <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code>, <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code>, and <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code> in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code> as a local editable install in development dependencies</p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.7</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.8</span></code>:</p>
<ul>
<li><p><strong>Fix</strong>: Bulk parameter setting now handles floating-point precision issues correctly</p></li>
<li><p>Uses <code class="docutils literal notranslate"><span class="pre">math.isclose()</span></code> with relative tolerance (1e-5) for float32/float64 comparison</p></li>
<li><p>Resolves false validation failures for parameters like <code class="docutils literal notranslate"><span class="pre">0.2</span></code> vs <code class="docutils literal notranslate"><span class="pre">0.20000000298023224</span></code></p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.1</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.3</span></code>:</p>
<ul>
<li><p><strong>Refactor</strong>: Centralized table name constants (<code class="docutils literal notranslate"><span class="pre">FLIGHT_RECORD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">LEAF_FC_RECORD_TABLE</span></code>)</p></li>
<li><p>Replaced all hardcoded table name strings with constants in <code class="docutils literal notranslate"><span class="pre">jobs.py</span></code> and <code class="docutils literal notranslate"><span class="pre">plugin.py</span></code></p></li>
<li><p>Plugin version now set dynamically from package <code class="docutils literal notranslate"><span class="pre">__version__</span></code></p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">pymavlink</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.14</span></code>:</p>
<ul>
<li><p>Added MAVLink definitions for <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> v0.2.3 mission states and actions</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">LeafSDK</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.3.3</span></code>:</p>
<ul>
<li><p>Refactored class naming for improved clarity</p></li>
<li><p>Distributed state synchronization</p></li>
<li><p>Mission state analysis documentation</p></li>
<li><p>Mission planning and trajectory updates</p></li>
<li><p>Refactored mission step handling</p></li>
<li><p>Joystick mode updates to match MAVLink</p></li>
<li><p>New mission configuration format support</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.3</span></code>:</p>
<ul>
<li><p><strong>Major Refactor</strong>: Mission flow and state management overhaul</p></li>
<li><p>Refactored mission execution logic with FSM and heartbeat modules</p></li>
<li><p>Distributed state synchronization and centralized state management</p></li>
<li><p>New MAVLink definitions integration</p></li>
<li><p>Mission behavior bug fixes</p></li>
<li><p>Enhanced mission step handling and joystick mode functionality</p></li>
<li><p>Comprehensive documentation and testing utilities</p></li>
<li><p>CI/CD pipeline integration</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.2</span></code>:</p>
<ul>
<li><p><strong>New Feature</strong>: Working adapter for QGC mission planning and execution updates</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">MissionStep</span></code> to <code class="docutils literal notranslate"><span class="pre">MissionPlanStep</span></code> for consistency</p></li>
<li><p>Renamed plugin class from <code class="docutils literal notranslate"><span class="pre">QGCMissionAdapterPetal</span></code> to <code class="docutils literal notranslate"><span class="pre">PetalQGCMissionServer</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">calculate_yaw_to_target</span></code> function for NED frame yaw calculations</p></li>
<li><p>Renamed previous function to <code class="docutils literal notranslate"><span class="pre">calculate_yaw_to_target_ENU</span></code> for clarity</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-51-2026-01-08">
<h2>Version 0.1.51 (2026-01-08)<a class="headerlink" href="#version-0-1-51-2026-01-08" title="Link to this heading"></a></h2>
<p><strong>Breaking Changes:</strong></p>
<ul class="simple">
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">flight-log-petal</span></code> to <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> throughout the codebase for naming consistency:</p>
<ul>
<li><p>Updated all references in <code class="docutils literal notranslate"><span class="pre">proxies.yaml</span></code> (enabled petals, proxy mappings, dependencies)</p></li>
<li><p>Updated API documentation and example requests</p></li>
<li><p>Updated Postman collection and environment files</p></li>
</ul>
</li>
</ul>
<p><strong>Dependency Updates:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.2.0</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.2.1</span></code>:</p>
<ul>
<li><p><strong>Critical Fix</strong>: Corrected MQTT topic prefix from <code class="docutils literal notranslate"><span class="pre">flight-log-petal</span></code> to <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> to match petal naming convention</p></li>
<li><p><strong>Critical Fix</strong>: Corrected MQTT topic prefix from <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> to <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> to match petal naming convention: was causing a conflict with user journey coordinator</p></li>
<li><p>Resolves MQTT subscription issues where topics were not matching expected patterns</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> from <code class="docutils literal notranslate"><span class="pre">v0.1.6</span></code> to <code class="docutils literal notranslate"><span class="pre">v0.1.7</span></code>:</p>
<ul>
<li><p><strong>Critical Fix</strong>: Added MQTT topic prefix from <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> to <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> for consistency</p></li>
<li><p>Ensures proper MQTT message routing and subscription handling</p></li>
</ul>
</li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">petal-qgc-mission-server</span></code> mapping and dependencies in <code class="docutils literal notranslate"><span class="pre">proxies.yaml</span></code></p></li>
</ul>
<p><strong>MAVLink Proxy Configuration:</strong></p>
<ul class="simple">
<li><p>Added required MAVLink system identification parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">SOURCE_SYSTEM_ID</span></code>: System ID for MAVLink messages (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SOURCE_COMPONENT_ID</span></code>: Component ID for MAVLink messages (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p>Exposed via environment variables and <code class="docutils literal notranslate"><span class="pre">ProxyConfig</span></code> in <code class="docutils literal notranslate"><span class="pre">src/petal_app_manager/__init__.py</span></code></p></li>
<li><p>Passed to <code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code> constructor in <code class="docutils literal notranslate"><span class="pre">main.py</span></code> and <code class="docutils literal notranslate"><span class="pre">external.py</span></code></p></li>
</ul>
</li>
<li><p>Changed default log directory from <code class="docutils literal notranslate"><span class="pre">/var/log/petal-app-manager</span></code> to <code class="docutils literal notranslate"><span class="pre">logs</span></code> for development convenience</p></li>
</ul>
<p><strong>Health Model Validation:</strong></p>
<ul class="simple">
<li><p>Refactored all Pydantic health models in <code class="docutils literal notranslate"><span class="pre">models/health.py</span></code> to use Pydantic v2’s <code class="docutils literal notranslate"><span class="pre">&#64;field_validator</span></code> decorator:</p>
<ul>
<li><p>Updated validators for <code class="docutils literal notranslate"><span class="pre">SystemHealthStatus</span></code>, <code class="docutils literal notranslate"><span class="pre">PetalHealthStatus</span></code>, <code class="docutils literal notranslate"><span class="pre">RedisHealthStatus</span></code></p></li>
<li><p>Updated validators for <code class="docutils literal notranslate"><span class="pre">MqttHealthStatus</span></code>, <code class="docutils literal notranslate"><span class="pre">MavLinkHealthStatus</span></code>, <code class="docutils literal notranslate"><span class="pre">HealthStatus</span></code></p></li>
<li><p>Ensures compatibility with Pydantic v2 and removes deprecation warnings</p></li>
<li><p>Maintains backward compatibility with existing health status enumeration values</p></li>
</ul>
</li>
</ul>
<p><strong>Testing Improvements:</strong></p>
<ul class="simple">
<li><p>Fixed unit tests in <code class="docutils literal notranslate"><span class="pre">test_external_proxy.py</span></code> to include required <code class="docutils literal notranslate"><span class="pre">source_system_id</span></code> and <code class="docutils literal notranslate"><span class="pre">source_component_id</span></code> parameters</p></li>
<li><p>Fixed unit tests in <code class="docutils literal notranslate"><span class="pre">test_mavlink_proxy.py</span></code> to use updated <code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code> constructor signature</p></li>
<li><p>Updated Postman environment file with new test variables (<code class="docutils literal notranslate"><span class="pre">test_flight_record</span></code>, <code class="docutils literal notranslate"><span class="pre">CALLBACK_URL</span></code>, <code class="docutils literal notranslate"><span class="pre">TS_CLIENT_URL</span></code>)</p></li>
</ul>
<p><strong>Migration Guide:</strong></p>
<p>If you have existing configurations or integrations referencing <code class="docutils literal notranslate"><span class="pre">flight-log-petal</span></code>, update them to <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code>:</p>
<ul class="simple">
<li><p>Environment variable names</p></li>
<li><p>MQTT topic subscriptions</p></li>
<li><p>API endpoint references</p></li>
<li><p>Configuration files</p></li>
</ul>
</section>
<section id="version-0-1-50-2026-01-05">
<h2>Version 0.1.50 (2026-01-05)<a class="headerlink" href="#version-0-1-50-2026-01-05" title="Link to this heading"></a></h2>
<p><strong>Configuration Enhancements:</strong></p>
<ul class="simple">
<li><p>All environment variables now use the <code class="docutils literal notranslate"><span class="pre">PETAL_</span></code> prefix to avoid conflicts with other applications.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">PETAL_LOG_DIR</span></code> environment variable for configuring log file directory:</p>
<ul>
<li><p><strong>Development</strong>: <code class="docutils literal notranslate"><span class="pre">logs</span></code> (relative to project directory)</p></li>
<li><p><strong>Production</strong>: <code class="docutils literal notranslate"><span class="pre">/home/droneleaf/.droneleaf/petal-app-manager</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>MAVLink Proxy Improvements:</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">set_params_bulk_lossy</span></code> async method for efficient bulk parameter setting over lossy links:</p>
<ul>
<li><p>Windowed sends with configurable <code class="docutils literal notranslate"><span class="pre">max_in_flight</span></code> parameter</p></li>
<li><p>Automatic periodic resend of unconfirmed parameters</p></li>
<li><p>Retry cap with configurable <code class="docutils literal notranslate"><span class="pre">max_retries</span></code></p></li>
<li><p>Optional parameter type specification (<code class="docutils literal notranslate"><span class="pre">UINT8</span></code>, <code class="docutils literal notranslate"><span class="pre">INT16</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL32</span></code>, etc.)</p></li>
<li><p>Confirmation via echoed <code class="docutils literal notranslate"><span class="pre">PARAM_VALUE</span></code> messages</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">get_params_bulk_lossy</span></code> async method for efficient bulk parameter retrieval:</p>
<ul>
<li><p>Uses <code class="docutils literal notranslate"><span class="pre">PARAM_REQUEST_READ</span></code> by name with windowed requests</p></li>
<li><p>Periodic resend of pending requests up to retry limit</p></li>
<li><p>Returns partial results on timeout for resilience</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">reboot_autopilot</span></code> async method to <code class="docutils literal notranslate"><span class="pre">MavLinkExternalProxy</span></code> for rebooting the autopilot (PX4/ArduPilot):</p>
<ul>
<li><p>Sends <code class="docutils literal notranslate"><span class="pre">MAV_CMD_PREFLIGHT_REBOOT_SHUTDOWN</span></code> command and waits for <code class="docutils literal notranslate"><span class="pre">COMMAND_ACK</span></code></p></li>
<li><p>Optional <code class="docutils literal notranslate"><span class="pre">reboot_onboard_computer</span></code> parameter to also reboot the onboard computer</p></li>
<li><p>Returns structured <code class="docutils literal notranslate"><span class="pre">RebootAutopilotResponse</span></code> with success status, status code, and reason</p></li>
<li><p>Fallback verification via heartbeat drop/return detection when no ACK is received</p></li>
<li><p>Comprehensive status codes for all failure scenarios (denied, rejected, unsupported, etc.)</p></li>
</ul>
</li>
</ul>
<p><strong>Petal Loading Architecture:</strong></p>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">proxies.yaml</span></code> configuration to support two distinct petal loading strategies:</p>
<ul>
<li><p><strong>startup_petals</strong>: Petals loaded synchronously during server startup (blocking)</p>
<ul>
<li><p>Critical petals that must be available before the server accepts requests</p></li>
<li><p>Server waits for these petals to fully initialize</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code></p></li>
</ul>
</li>
<li><p><strong>enabled_petals</strong>: Petals loaded asynchronously after server startup (non-blocking)</p>
<ul>
<li><p>Background task spawned after server is ready to accept requests</p></li>
<li><p>Loads petals one-by-one without blocking the main event loop</p></li>
<li><p>Reduces server startup time and improves responsiveness</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">flight-log-petal</span></code>, <code class="docutils literal notranslate"><span class="pre">petal-warehouse</span></code>, <code class="docutils literal notranslate"><span class="pre">petal-mission-planner</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Refactored petal async startup into reusable <code class="docutils literal notranslate"><span class="pre">_handle_petal_async_startup()</span></code> helper</p></li>
</ul>
<p><strong>Health Monitoring Enhancements:</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">PetalHealthInfo</span></code> model to track individual petal status:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Petal identifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">status</span></code>: One of <code class="docutils literal notranslate"><span class="pre">loaded</span></code>, <code class="docutils literal notranslate"><span class="pre">loading</span></code>, <code class="docutils literal notranslate"><span class="pre">failed</span></code>, <code class="docutils literal notranslate"><span class="pre">not_loaded</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: Petal version if available</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_startup_petal</span></code>: Whether this is a critical startup petal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load_time</span></code>: ISO timestamp when petal was loaded</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error</span></code>: Error message if petal failed to load</p></li>
</ul>
</li>
<li><p>Extended <code class="docutils literal notranslate"><span class="pre">HealthMessage</span></code> to include <code class="docutils literal notranslate"><span class="pre">petals</span></code> array with real-time petal loading status</p></li>
<li><p>Health publisher now reports petal loading progress during background loading phase</p></li>
</ul>
<p><strong>S3 Bucket Proxy Improvements:</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">move_file</span></code> async method to <code class="docutils literal notranslate"><span class="pre">bucket.py</span></code> for moving (renaming) files within the S3 bucket, which performs a copy followed by a delete operation.</p></li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">upload_file</span></code> method to accept an optional <code class="docutils literal notranslate"><span class="pre">custom_s3_key</span></code> parameter, allowing callers to specify the exact S3 key for uploads.</p></li>
</ul>
<p><strong>Redis Proxy Improvements:</strong></p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">scan_keys</span></code> async method to <code class="docutils literal notranslate"><span class="pre">redis.py</span></code> to efficiently scan and return keys matching a given pattern, supporting pagination via the <code class="docutils literal notranslate"><span class="pre">count</span></code> parameter.</p></li>
<li><p>Changed Redis set operation logging from info to debug level to reduce log verbosity for routine key writes.</p></li>
</ul>
</section>
<section id="version-0-1-49-2025-01-05">
<h2>Version 0.1.49 (2025-01-05)<a class="headerlink" href="#version-0-1-49-2025-01-05" title="Link to this heading"></a></h2>
<p><strong>Bug Fixes:</strong></p>
<ul class="simple">
<li><p>Remove redundant log streaming utility files and references:</p>
<ul>
<li><p>Deleted <code class="docutils literal notranslate"><span class="pre">log_streamer.py</span></code> from <code class="docutils literal notranslate"><span class="pre">utils/</span></code> directory</p></li>
<li><p>Removed import and endpoint registration for log streaming in <code class="docutils literal notranslate"><span class="pre">config_api.py</span></code> and <code class="docutils literal notranslate"><span class="pre">main.py</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-48-2025-12-31">
<h2>Version 0.1.48 (2025-12-31)<a class="headerlink" href="#version-0-1-48-2025-12-31" title="Link to this heading"></a></h2>
<p><strong>Bug Fixes:</strong>
- Added mqtt as a dependency for <cite>petal-mission-planner</cite> in <cite>proxies.yaml</cite></p>
</section>
<section id="version-0-1-47-2025-12-31">
<h2>Version 0.1.47 (2025-12-31)<a class="headerlink" href="#version-0-1-47-2025-12-31" title="Link to this heading"></a></h2>
<p><strong>Bug Fixes:</strong></p>
<ul class="simple">
<li><p>Fix all Petal plugin keys in <code class="docutils literal notranslate"><span class="pre">proxies.yaml</span></code> to match correct <code class="docutils literal notranslate"><span class="pre">__name__</span></code> attribute in <code class="docutils literal notranslate"><span class="pre">plugin.py</span></code>:</p>
<ul>
<li><p>flight_records → flight-log-petal</p></li>
<li><p>petal_warehouse → petal-warehouse</p></li>
<li><p>mission_planner → petal-mission-planner</p></li>
<li><p>petal_user_journey_coordinator → petal-user-journey-coordinator</p></li>
<li><p>qgc_petal → petal-qgc-mission-server</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-46-2025-12-31">
<h2>Version 0.1.46 (2025-12-31)<a class="headerlink" href="#version-0-1-46-2025-12-31" title="Link to this heading"></a></h2>
<p><strong>Bug Fixes:</strong>
- Made the robot_type_id field in the <cite>LocalDbMachineInfo</cite> model (<cite>health.py</cite>) optional, allowing it to be <cite>None</cite> if not provided.</p>
</section>
<section id="version-0-1-45-2025-11-23">
<h2>Version 0.1.45 (2025-11-23)<a class="headerlink" href="#version-0-1-45-2025-11-23" title="Link to this heading"></a></h2>
<p><strong>Architecture Enhancements:</strong></p>
<ul class="simple">
<li><p><strong>Multi-Threaded MAVLink Processing</strong> - Significant performance improvements for MAVLink message handling:</p>
<ul>
<li><p><strong>ExternalProxy and MavLinkExternalProxy</strong>: Now use I/O thread + multiple worker threads architecture</p></li>
<li><p><strong>I/O Thread</strong>: Dedicated thread for reading/writing MAVLink messages (non-blocking)</p></li>
<li><p><strong>Worker Threads</strong>: Configurable pool of threads for processing handlers in parallel (default: 4)</p></li>
<li><p><strong>Thread-Safe Message Buffer</strong>: Deque-based buffer with thread-safe enqueue/dequeue operations</p></li>
<li><p><strong>Configuration</strong>: <code class="docutils literal notranslate"><span class="pre">MAVLINK_WORKER_THREADS</span></code> environment variable (default: 4)</p></li>
<li><p><strong>Performance</strong>: 2x throughput improvement with parallel handler processing</p></li>
</ul>
</li>
<li><p><strong>Resilient Proxy Startup</strong> - Enhanced reliability and stability:</p>
<ul>
<li><p><strong>Non-Blocking Startup</strong>: MQTT and Cloud proxies no longer crash the FastAPI server on connection failures</p></li>
<li><p><strong>Graceful Degradation</strong>: Proxies log warnings and remain inactive until dependencies are available</p></li>
<li><p><strong>Background Monitoring</strong>: Automatic retry tasks monitor and reconnect failed proxies</p></li>
<li><p><strong>Configurable Retry Intervals</strong>: All timeout/retry values centralized in <code class="docutils literal notranslate"><span class="pre">ProxyConfig</span></code> class</p></li>
<li><p><strong>Environment Control</strong>: Override timeouts via environment variables without code changes</p></li>
</ul>
</li>
</ul>
<p><strong>Configuration Management:</strong></p>
<ul class="simple">
<li><p><strong>Centralized ProxyConfig Class</strong> - New configuration section for proxy connection management:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">MQTT_RETRY_INTERVAL</span></code> - Monitoring task retry interval (default: 10.0 seconds)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLOUD_RETRY_INTERVAL</span></code> - Cloud proxy retry interval (default: 10.0 seconds)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MQTT_STARTUP_TIMEOUT</span></code> - MQTT startup timeout (default: 5.0 seconds)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLOUD_STARTUP_TIMEOUT</span></code> - Cloud token fetch timeout (default: 5.0 seconds)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MQTT_SUBSCRIBE_TIMEOUT</span></code> - Topic subscription timeout (default: 5.0 seconds)</p></li>
</ul>
</li>
<li><p><strong>Hybrid Petal Loading</strong> - Massive performance improvement for petal initialization:</p>
<ul>
<li><p><strong>Direct Path Import</strong>: Load petals from <code class="docutils literal notranslate"><span class="pre">module.submodule:ClassName</span></code> paths (~0.002ms)</p></li>
<li><p><strong>Entry Point Fallback</strong>: Falls back to traditional entry point discovery if path fails (~67ms)</p></li>
<li><p><strong>4355x Speedup</strong>: Direct path loading is 4355 times faster than entry point discovery</p></li>
<li><p><strong>Configuration</strong>: Define petal paths in <code class="docutils literal notranslate"><span class="pre">proxies.yaml</span></code> under <code class="docutils literal notranslate"><span class="pre">petals</span></code> section</p></li>
</ul>
</li>
</ul>
<p><strong>Health Monitoring Updates:</strong></p>
<ul class="simple">
<li><p><strong>Enhanced Thread Tracking</strong> - Updated health check models for multi-threaded architecture:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">MavlinkWorkerThreadInfo</span></code>: Separate tracking for I/O thread and worker threads</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io_thread_running</span></code>: Boolean status for I/O thread</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io_thread_alive</span></code>: Health status for I/O thread</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">worker_threads_running</span></code>: Boolean status for worker threads</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">worker_thread_count</span></code>: Number of configured worker threads</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">worker_threads_alive</span></code>: Count of healthy worker threads</p></li>
</ul>
</li>
</ul>
<p><strong>Stability Improvements:</strong></p>
<ul class="simple">
<li><p>Fixed server freeze during startup when TypeScript MQTT client is unavailable</p></li>
<li><p>Fixed 30-second timeout blocking in MQTT proxy subscription operations</p></li>
<li><p>Improved error handling for missing organization IDs during proxy startup</p></li>
<li><p>Enhanced monitoring tasks with proper timeout protection</p></li>
<li><p>All proxy operations respect configurable timeout values</p></li>
</ul>
<p><strong>Developer Benefits:</strong></p>
<ul class="simple">
<li><p>Faster petal loading during development (4355x speedup)</p></li>
<li><p>No server crashes when cloud/MQTT services are unavailable</p></li>
<li><p>Easy timeout/retry configuration via environment variables</p></li>
<li><p>Better visibility into proxy connection status via health endpoints</p></li>
<li><p>Improved multi-threading performance for high-throughput scenarios</p></li>
</ul>
</section>
<section id="version-0-1-44-2025-11-07">
<h2>Version 0.1.44 (2025-11-07)<a class="headerlink" href="#version-0-1-44-2025-11-07" title="Link to this heading"></a></h2>
<p><strong>Configuration Enhancements:</strong></p>
<ul class="simple">
<li><p><strong>MQTTProxy Topic Configuration</strong> - MQTT topic names now configurable via environment variables</p>
<ul>
<li><p>Added environment-configurable topic parameters to MQTTProxy class:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">command_edge_topic</span></code> - Configurable via <code class="docutils literal notranslate"><span class="pre">COMMAND_EDGE_TOPIC</span></code> (default: <code class="docutils literal notranslate"><span class="pre">command/edge</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">response_topic</span></code> - Configurable via <code class="docutils literal notranslate"><span class="pre">RESPONSE_TOPIC</span></code> (default: <code class="docutils literal notranslate"><span class="pre">response</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_topic</span></code> - Configurable via <code class="docutils literal notranslate"><span class="pre">TEST_TOPIC</span></code> (default: <code class="docutils literal notranslate"><span class="pre">command</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">command_web_topic</span></code> - Configurable via <code class="docutils literal notranslate"><span class="pre">COMMAND_WEB_TOPIC</span></code> (default: <code class="docutils literal notranslate"><span class="pre">command/web</span></code>)</p></li>
</ul>
</li>
<li><p>Topics now read from <code class="docutils literal notranslate"><span class="pre">Config</span></code> class enabling direct environment control</p></li>
<li><p>Improved deployment flexibility across different MQTT broker configurations</p></li>
</ul>
</li>
</ul>
<p><strong>Developer Benefits:</strong>
- Simplified MQTT topic customization for different environments
- Enhanced configuration management without code changes
- Better separation of configuration from implementation</p>
</section>
<section id="version-0-1-43-2025-11-05-hotfix">
<h2>Version 0.1.43 (2025-11-05) - Hotfix<a class="headerlink" href="#version-0-1-43-2025-11-05-hotfix" title="Link to this heading"></a></h2>
<p><strong>Breaking Changes:</strong></p>
<ul class="simple">
<li><p><strong>MQTTProxy Refactoring</strong> ⚠️ <strong>Code Breaking Changes</strong> ⚠️
- Handler-based subscription model replaces arbitrary topic subscriptions
- Petals now register handlers for <code class="docutils literal notranslate"><span class="pre">command/edge</span></code> topic using <code class="docutils literal notranslate"><span class="pre">register_handler(callback)</span></code>
- All command messages flow through registered handlers with command-based routing
- Single subscription per petal with command-based routing</p></li>
</ul>
<p><strong>Removed Public Methods:</strong>
- <code class="docutils literal notranslate"><span class="pre">subscribe_to_topic()</span></code> - Now private
- <code class="docutils literal notranslate"><span class="pre">unsubscribe_from_topic()</span></code> - Now private
- <code class="docutils literal notranslate"><span class="pre">subscribe_pattern()</span></code> - Removed (use command-based routing instead)</p>
<p><strong>New Public Methods:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Register a handler for command/edge topic</span>
<span class="k">def</span><span class="w"> </span><span class="nf">register_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Returns subscription_id for later unregistration&quot;&quot;&quot;</span>

<span class="c1"># Unregister a handler</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unregister_handler</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Remove handler using its subscription_id&quot;&quot;&quot;</span>

<span class="c1"># Publish to command/web topic</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish_message</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">qos</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Publish message to command/web topic&quot;&quot;&quot;</span>

<span class="c1"># Send response to response topic</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_command_response</span><span class="p">(</span><span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Send command response with automatic topic routing&quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Dependencies Updated:</strong>
- Latest <code class="docutils literal notranslate"><span class="pre">petal-leafsdk</span></code> compatibility
- Latest <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> compatibility</p>
</section>
<section id="version-0-1-42-2025-11-03">
<h2>Version 0.1.42 (2025-11-03)<a class="headerlink" href="#version-0-1-42-2025-11-03" title="Link to this heading"></a></h2>
<p><strong>Health Reporting Enhancements:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/health/overview</span></code> endpoint now contains version information for each Petal component:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">petal_leafsdk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">petal_flight_log</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">petal_warehouse</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">petal_user_journey_coordinator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">petal_qgc_mission_server</span></code></p></li>
</ul>
</li>
<li><p>Components report <code class="docutils literal notranslate"><span class="pre">&quot;not</span> <span class="pre">installed&quot;</span></code> when not available</p></li>
</ul>
<p><strong>Dependency Updates:</strong>
- Updated <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> dependency to version <code class="docutils literal notranslate"><span class="pre">v0.1.3</span></code>
- Bumped application version from <code class="docutils literal notranslate"><span class="pre">0.1.41</span></code> to <code class="docutils literal notranslate"><span class="pre">0.1.42</span></code></p>
</section>
<section id="version-0-1-41-2025-11-02">
<h2>Version 0.1.41 (2025-11-02)<a class="headerlink" href="#version-0-1-41-2025-11-02" title="Link to this heading"></a></h2>
<p><strong>Bug Fixes:</strong>
- Fixed health publishing error: <code class="docutils literal notranslate"><span class="pre">'MavlinkProxyHealth'</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'details'</span></code>
- Mavlink connection issues now report INFO messages instead of ERROR logs
- Improved error handling for unhealthy mavlink connections</p>
</section>
<section id="version-0-1-39-2025-10-23">
<h2>Version 0.1.39 (2025-10-23)<a class="headerlink" href="#version-0-1-39-2025-10-23" title="Link to this heading"></a></h2>
<p><strong>New Features:</strong>
- <code class="docutils literal notranslate"><span class="pre">/health/overview</span></code> endpoint for accessing Petal App Manager version
- Dynamic version retrieval using <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">petal_app_manager;</span> <span class="pre">print(petal_app_manager.__version__)</span></code>
- Version information added to controller dashboard message <code class="docutils literal notranslate"><span class="pre">/controller-dashboard/petals-status</span></code></p>
<p><strong>API Enhancements:</strong>
- Controller dashboard now includes version field in status responses:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Petal App Manager&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;component_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;petal_app_manager&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;version&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;0.1.39&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Good conditions&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;timestamp&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2025-10-23T14:35:30.143747&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;services&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[...]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="version-0-1-38-2025-10-23">
<h2>Version 0.1.38 (2025-10-23)<a class="headerlink" href="#version-0-1-38-2025-10-23" title="Link to this heading"></a></h2>
<p><strong>Stability Improvements:</strong>
- MAVFTP reliability improvements for Pixhawk SD card file system operations
- Enhanced download and file system information request stability
- Overall Petal App Manager stability improvements</p>
<p><strong>Related Releases:</strong>
- <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> v0.1.1 - Fixed square test JSON response compatibility bug</p>
</section>
<section id="version-0-1-37-2025-10-22">
<h2>Version 0.1.37 (2025-10-22)<a class="headerlink" href="#version-0-1-37-2025-10-22" title="Link to this heading"></a></h2>
<p><strong>Bug Fixes:</strong>
- Cloud proxy error message improvements
- Fixed MAVFTP reliability issues affecting overall system reliability
- Fixed <code class="docutils literal notranslate"><span class="pre">petal-user-journey-coordinator</span></code> bugs</p>
<p><strong>Stability:</strong>
- Improved overall reliability of petal-app-manager
- Enhanced MAVFTP communication stability</p>
</section>
<section id="version-0-1-31-2025-09-25">
<h2>Version 0.1.31 (2025-09-25)<a class="headerlink" href="#version-0-1-31-2025-09-25" title="Link to this heading"></a></h2>
<p><strong>New Features:</strong>
- <strong>MQTT Middleware Proxy</strong> - Unified interface for MQTT communications
- <strong>Organization Manager</strong> - Fetches organization ID without DynamoDB dependency
- <strong>LeafFC Heartbeat Check</strong> - Added to logs and <code class="docutils literal notranslate"><span class="pre">/health/detailed</span></code> endpoint</p>
<p><strong>Stability Improvements:</strong>
- Enhanced server startup and shutdown sequence (avoiding dead-locks)
- Improved system reliability and error handling</p>
<p><strong>Related Releases:</strong></p>
<ul class="simple">
<li><p><strong>Petal User Journey Coordinator</strong> - MQTT integration for web client applications:</p>
<ul>
<li><p>Multiple handlers for PX4 parameter management</p></li>
<li><p>ESC calibration with keep-alive streaming</p></li>
<li><p>Real-time telemetry streaming to web client</p></li>
<li><p>Debug flag for square test with plotting and data dump</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-0-1-29-2025-08-28">
<h2>Version 0.1.29 (2025-08-28)<a class="headerlink" href="#version-0-1-29-2025-08-28" title="Link to this heading"></a></h2>
<p><strong>New Features:</strong></p>
<ul class="simple">
<li><p><strong>MQTT Middleware Proxy</strong>:</p>
<ul>
<li><p>Reduces integration complexity for local applications</p></li>
<li><p>Unified interface to MQTT communications</p></li>
<li><p>Enables faster development cycles</p></li>
<li><p>Centralizes communication logic for easier maintenance</p></li>
</ul>
</li>
<li><p><strong>Petal &amp; Proxy Control Dashboard</strong>:</p>
<ul>
<li><p>Unified control and transparency for all proxies and petals</p></li>
<li><p>Real-time health monitoring and dependency tracking</p></li>
<li><p>Centralized enable/disable controls and API testing</p></li>
<li><p>Real-time log streaming and filtering</p></li>
<li><p>Accessible at <code class="docutils literal notranslate"><span class="pre">http://localhost/home/petals-proxies-control</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>Business Value:</strong>
- Faster development and maintenance cycles
- Scalable and flexible operations
- Reduced Petal App Manager overhead</p>
</section>
<section id="version-0-1-28-2025-08-17">
<h2>Version 0.1.28 (2025-08-17)<a class="headerlink" href="#version-0-1-28-2025-08-17" title="Link to this heading"></a></h2>
<p><strong>New Features:</strong>
- <strong>Redis Pattern PubSub Support</strong> - Enhanced communication reliability
- <strong>LeafFC v1.4.0 Compatibility</strong> - Improved internal DroneLeaf system communication
- <strong>Log Output Configuration</strong> - Configurable log level routing via <code class="docutils literal notranslate"><span class="pre">config.json</span></code></p>
<p><strong>Bug Fixes:</strong>
- S3 bucket access credential refresh from session manager
- HEAR_CLI <code class="docutils literal notranslate"><span class="pre">petal-app-manager-prepare-arm</span></code> and <code class="docutils literal notranslate"><span class="pre">petal-app-manager-prepare-sitl</span></code> fixes</p>
<p><strong>Improvements:</strong>
- Enhanced communication between LeafFC and LeafSDK
- Improved log management and debugging capabilities</p>
</section>
<section id="version-0-1-23-2025-07-31">
<h2>Version 0.1.23 (2025-07-31)<a class="headerlink" href="#version-0-1-23-2025-07-31" title="Link to this heading"></a></h2>
<p><strong>Major Updates:</strong>
- <strong>Cloud Integration</strong>: Full implementation of cloud DynamoDB and S3 bucket proxies
- <strong>Flight Log Integration</strong>: Latest <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> v0.1.4 for cloud syncing endpoints
- <strong>Error Management</strong>: Routes for clearing error flags from edge devices
- <strong>MAVLink Improvements</strong>: Enhanced proxy communication with threading locks for non-thread safe operations</p>
<p><strong>Minor Updates:</strong>
- Centralized configuration management
- Updated <code class="docutils literal notranslate"><span class="pre">petal-warehouse</span></code> v0.1.3 with pymavlink bug fixes</p>
<p><strong>Related Releases:</strong>
- <code class="docutils literal notranslate"><span class="pre">petal-flight-log</span></code> v0.1.4 - Flight record management and cloud syncing
- <code class="docutils literal notranslate"><span class="pre">LeafSDK</span></code> v0.1.5 - Mission flow control and progress updates (pause, resume, cancel)</p>
</section>
<section id="version-0-1-18-2025-07-29">
<h2>Version 0.1.18 (2025-07-29)<a class="headerlink" href="#version-0-1-18-2025-07-29" title="Link to this heading"></a></h2>
<p><strong>New Features:</strong>
- <strong>Burst Message Support</strong> - Optional burst message capability
- <strong>Message Timeout Control</strong> - Configurable timeouts to reduce CPU overhead
- <strong>Detailed Health Check</strong> - <code class="docutils literal notranslate"><span class="pre">/health/detailed</span></code> endpoint for field status checks
- <strong>Petal Template</strong> - HEAR_CLI petal initialization template</p>
<p><strong>HEAR_CLI Integration:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hear-cli<span class="w"> </span>local_machine<span class="w"> </span>run_program<span class="w"> </span>--p<span class="w"> </span>petal_init
</pre></div>
</div>
<p><strong>Related Releases:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LeafSDK</span> <span class="pre">Petal</span></code> v0.1.5:</p>
<ul>
<li><p>Upgraded trajectory polynomial coefficient generation</p></li>
<li><p>Burst MAVLink messages for improved communication reliability</p></li>
<li><p>Addressed robustness issues in LeafSDK functionalities</p></li>
</ul>
</li>
</ul>
<p><strong>Known Limitations:</strong>
- Trajectory sampling causes jitter (needs LeafFC-side implementation)
- MAVLink communication over mavlink-router lacks reliability (Redis recommended)</p>
</section>
<section id="version-0-1-5-2025-07-03-first-stable-release">
<h2>Version 0.1.5 (2025-07-03) - First Stable Release<a class="headerlink" href="#version-0-1-5-2025-07-03-first-stable-release" title="Link to this heading"></a></h2>
<p><strong>Milestone Release:</strong>
- First stable release of Petal App Manager
- Available on PyPI: <a class="reference external" href="https://pypi.org/project/petal-app-manager/">https://pypi.org/project/petal-app-manager/</a>
- HEAR_CLI support for development and production deployment</p>
<p><strong>Related Petal Releases:</strong></p>
<ul class="simple">
<li><p><strong>Flight Log Petal</strong> v0.1.1:
- Added ability to cancel Pixhawk downloads
- Prevents mavlink connection interruption</p></li>
<li><p><strong>LeafSDK Petal</strong> v0.1.0:
- Mission planning library integration
- Easy deployment in DroneLeaf ecosystem
- External application compatibility</p></li>
<li><p><strong>Warehouse Management Petal</strong> v0.1.0:
- Real-time drone publishing via MAVLink over WebSocket
- Blender visualization integration</p></li>
</ul>
</section>
<section id="version-0-1-0-2025-06-22-initial-release">
<h2>Version 0.1.0 (2025-06-22) - Initial Release<a class="headerlink" href="#version-0-1-0-2025-06-22-initial-release" title="Link to this heading"></a></h2>
<p><strong>Milestone:</strong>
- Passed initial testing phase
- First public release</p>
<p><strong>Core Capabilities:</strong>
- MAVLink connection management abstraction
- Local DynamoDB database integration
- Redis cache support
- Cloud infrastructure communication
- ROS1 topic integration</p>
<p><strong>Availability:</strong>
- PyPI: <a class="reference external" href="https://pypi.org/project/petal-app-manager/">https://pypi.org/project/petal-app-manager/</a>
- GitHub: <a class="reference external" href="https://github.com/DroneLeaf/petal-app-manager.git">https://github.com/DroneLeaf/petal-app-manager.git</a></p>
<p><strong>Business Value:</strong>
- Accelerated development cycles
- Reduced implementation costs
- Low-level code abstraction
- Simplified drone application development</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="petal_documentation/petal_flight_log.html" class="btn btn-neutral float-left" title="Petal Flight Log" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api_reference/index.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DroneLeaf.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>